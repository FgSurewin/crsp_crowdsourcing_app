{"version":3,"sources":["style/helper.js","components/Carousel/data.js","images/curve.svg","images/girl.png","images/man.jpg","components/Carousel/CarouselStyle.jsx","components/Carousel/index.jsx","style/globalStyle.js","images/location.svg","images/question.svg","components/FirstSection/data.js","images/dot.svg","components/FirstSection/FirstSectionStyle.jsx","components/FirstSection/index.jsx","images/Email.svg","images/GitHub.svg","images/Facebook.svg","components/Footer/data.js","images/Twitter.svg","components/Footer/FooterStyle.jsx","components/Footer/index.jsx","components/Navbar/NavbarStyle.jsx","utils/localStorage.js","images/BigLogo.svg","images/blackLogo.svg","redux/actionTypes.js","components/Navbar/UserAvatar.jsx","components/Navbar/index.jsx","components/Header/HeaderStyle.jsx","videos/background.mp4","components/Header/data.js","images/scrollDown.svg","components/Header/index.jsx","hooks/useScroll.js","images/whole.svg","components/SecondeSection/data.js","images/comma.svg","components/SecondeSection/SecondSectionStyle.jsx","components/SecondeSection/index.jsx","views/Home/index.jsx","components/ProtectedRoute/index.jsx","views/SignUp/SignUpStyle.jsx","utils/Reg.js","api/index.js","api/user.js","views/SignUp/index.jsx","images/login-2.jpg","views/Login/LoginStyle.jsx","views/Login/index.jsx","images/SmallLogo.svg","api/images.js","views/LabelPage/utils.js","views/LabelPage/PureValidation.jsx","components/StreetViewOnly/utils/streetViewTools.js","components/StreetViewOnly/style.jsx","components/StreetViewOnly/InstructionModal.jsx","components/StreetViewOnly/text.js","components/StreetViewOnly/utils/screenshotHelper.js","firebase/index.js","components/StreetViewOnly/PreviewModal.jsx","redux/reducers/streetView.js","components/StreetViewOnly/index.jsx","views/CapturePage/utils/index.js","views/CapturePage/index.jsx","views/CaptureLabelPage/math.js","views/CaptureLabelPage/utils.js","api/collectImage.js","views/CaptureLabelPage/index.jsx","components/OriginalMap/Label/index.jsx","components/OriginalMap/utils/mapTools.js","components/OriginalMap/utils/streetViewTools.js","components/OriginalMap/style.jsx","components/OriginalMap/SingleMarker.jsx","components/OriginalMap/utils/createCustomElement.js","components/OriginalMap/utils/MarkerCreator.js","components/OriginalMap/index.jsx","components/OriginalMap/utils/markerTools.js","views/CaptureExploration/utils/index.js","images/Group1.png","views/CaptureExploration/style.jsx","api/staticStreetView.js","views/CaptureExploration/index.jsx","views/CaptureLabelPage/EditCaptureLabelPage.jsx","views/NotFound/index.jsx","App.jsx","redux/reducers/map.js","redux/reducers/user.js","redux/reducers/index.js","redux/store.js","index.js","style/theme.js"],"names":["size","content","CarouselData","curve","slides","icon","name","REM","pixel","X_SMALL","SMALL","MEDIUM","BREAKPOINT_UP","small","medium","large","xLarge","BREAKPOINT_DOWN","xSmall","phone","tablet","laptop","desktop","lessThan","css","hide_for_mobile","hide_for_desktop","CarouselWrapper","styled","section","CarouselIllustration","img","SwiperSlide","div","SwiperCover","SlideContainer","SlideIcon","SlideCover","SlideName","p","SlideContent","NavigationButton","props","left","right","SwiperContainer","SwiperWrapper","Carousel","React","useEffect","Swiper","navigation","nextEl","prevEl","src","alt","className","map","slide","index","use","Navigation","GlobalStyle","createGlobalStyle","Container","reverse","FirstSectionData","title","illustration","Location","dot","questionMark","QuestionMark","FirstSectionWrapper","FirstSectionIllustration","FirstSectionBox","FirstSectionContent","FirstSectionTitle","h2","theme","primaryFont","FirstSectionText","DotBackground","FirstSection","FooterData","project","projectList","connect","connectList","GitHub","Email","Facebook","copyRight","FooterWrapper","footer","FooterContainer","ListTitle","ProjectList","ul","ProjectItem","li","ConnectList","ConnectItem","ConnectIcon","ConnectText","Divider","CopyRight","ProjectLink","a","ConnectLink","Footer","item","href","circleStyle","primary","fixedStyle","NavbarWrapper","nav","isStatic","isFixed","NavbarContainer","NavbarLogo","Logo","NavbarHamburger","NavbarList","NavbarItem","NavbarLink","NavLink","blackBackground","whiteBackground","MobileMenu","MobileItem","MobileLink","ID","TOKEN","NICKNAME","saveLocal","key","value","localStorage","setItem","readLocal","getItem","deleteLocal","removeItem","deleteAllLocal","HANDLE_MAP","HANDLE_COMPLETED","HANDLE_EMPTY","LOGIN","UserAvatar","nickname","dispatch","useDispatch","type","danger","onClick","payload","id","token","trigger","style","backgroundColor","verticalAlign","fontWeight","fontSize","gap","toUpperCase","Navbar","useState","showMenu","setShowMenu","logoSrc","BlackLogo","WhiterLogo","useSelector","state","user","localNickname","hasLogin","to","in","HeaderWrapper","header","HeaderVideo","video","Shade","HeaderContent","HeaderTitleBox","HeaderTitle","HeaderSubtitleBox","HeaderSubtitle","HeaderIcon","HeaderButton","Button","primaryColor","HeaderData","one","two","subtitle","button","Header","setPrimary","window","onscroll","document","documentElement","scrollTop","useScroll","muted","loop","autoPlay","Background","color","SecondSectionData","whole","comma","SecondSectionWrapper","SecondSectionIllustration","SecondSectionBox","SecondSectionContent","SecondSectionTitle","SecondSectionText","CommaMark","SecondSection","Home","ProtectedRoute","Component","component","path","rest","location","useLocation","localToken","render","from","pathname","SignUpWrapper","SignUpContainer","Row","FormWrapper","Col","SignUpText","TipText","reg","testEmail","email","test","myService","axios","create","baseURL","interceptors","request","config","headers","authorization","error","Promise","reject","response","res","data","code","message","resolve","addImages","method","url","Option","Select","SignUp","Form","useForm","form","history","useHistory","onFinish","values","result","success","push","resetFields","justify","align","span","labelCol","wrapperCol","Item","label","rules","required","validator","_","Error","Password","getFieldValue","placeholder","offset","htmlType","LoginWrapper","LoginContainer","LoginText","ImageContainer","LoginImage","Login","catch","lg","height","sm","LoginImageBG","fetchToggle","typeConfig","subtype","WIDTH","HEIGHT","labelsDecorator","list","image_size","x","box","y","top","width","undefined","label_id","parseLabel","reverseLabel","labelsReverser","LabelPage","setState","_state","useRef","_mount","progress","userId","loadFunction","useCallback","console","log","current","labeled","onCancel","Modal","confirm","cancelText","onOk","onSubmit","labelArea","number","labels","imgUrl","handleSubmit","handleBack","defaultStreetViewOptions","zoomControl","scrollwheel","fullscreenControl","panControl","linksControl","disableDefaultUI","clickToGo","OriginalMapWrapper","StreetViewWindow","OnlyStreetViewContainer","StreetViewShade","InstructionItem","down","UploadProgressContainer","InstructionModal","confirmModal","show","hideModal","visible","maskClosable","keyboard","closable","pagination","detectBrowser","navigator","userAgent","indexOf","documentMode","stopCapture","videoElem","srcObject","getTracks","forEach","track","stop","startCapture","displayMediaOptions","captureStream","mediaDevices","getDisplayMedia","takeScreenShot","canvasElem","videoWidth","videoHeight","cutHeight","getContext","drawImage","imgSrc","toDataURL","imgSize","SwiperCore","Pagination","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","storage","PreviewModalContainer","PreviewModalText","strong","PreviewModal","okText","FILL_STREET_VIEW_INFO","FILL_STREET_VIEW_IMAGE","FILL_STREET_VIEW_MARKERS","FILL_STREET_VIEW_IMAGE_LIST","FILL_STREET_VIEW_LOCATION","FILL_STREET_VIEW_WITHOUT_IMAGE_LIST","FILL_STREET_VIEW_ADD_IMAGE","FILL_STREET_VIEW_CLEAR_MARKERS","FILL_STREET_VIEW_IMAGE_COMPLETED","FILL_STREET_VIEW_SELECT_IMAGE","initialState","pano","lat","lng","pov","heading","pitch","zoom","images","panoMarkers","selectImage","streetViewReducer","action","newMarkers","finalStreetMarkerList","streetMarkerList","concat","Object","assign","completed","addImage","pano_id","filter","image_id","_id","currentImage","asyncLoading","api","googleMaps","globalPath","jsonp","mainStyle","streetViewOptions","_streetView","streetView","setStreetView","uploadProgress","setUploadProgress","videoRef","canvasRef","imgInfo","setShow","videoTrack","getVideoTracks","getSettings","displaySurface","setTimeout","setShowPreview","showPreview","options","StreetViewPanorama","event","clearInstanceListeners","ref","display","capture","uploadTask","putString","on","snapshot","currentProgress","bytesTransferred","totalBytes","getDownloadURL","then","handleUploadImage","percent","generateStreetOption","position","CapturePage","sgn","calculatePointPov","canvasX","canvasY","parseInt","PI","Math","cos","sin","tan","sqrt","atan2","asin","h0","p0","f","pow","get3dFov","x0","y0","z0","du","dv","ux","uy","z","R","generateImage","labeled_area","lon","isLabeled","count","generatePanoMarkersAtCenter","labelImageSize","targetSize","sizeConvert","newPov","uuidv4","point","fetchStreetViewImagesByPano","fetchStreetViewToggle","fetchStreetViewImageById","addStreetViewMarkers","CaptureLabelPage","newImage","Label","labelStyle","defaultMapOptions","mapTypeControlOptions","mapTypeIds","gestureHandling","combineMapOptions","combineStreetViewOptions","generateInfo","positionClass","MapContainer","SmallMap","StreetViewContainer","SingleMarkerInnerWrapper","getColor","targetType","SingleMarkerInnerContainer","SingleMarkerInnerText","SingleMarker","overlay","el","this","children","container","anchor","clickFunc","createElement","cursor","createOverlayElement","PanoMarker","opts","onAdd","first_","marker_","size_","visible_","zIndex","zIndex_","id_","className_","title_","icon_","backgroundImage","getPanes","overlayMouseTarget","appendChild","addEventListener","draw","bind","povListener_","addListener","getMap","zoomListener_","eventName","PointerEvent","MSPointerEvent","pano_","povToPixel_","position_","getPov","getZoom","container_","anchor_","isClick_","clickable_","cancelBubble","stopPropagation","clickFunc_","onRemove","removeListener","parentNode","removeChild","setPano","setMap","promiseFn","pollId_","setInterval","clearInterval","call","povToPixel3d","targetPov","currentPov","viewport","offsetWidth","target","offsetHeight","DEG_TO_RAD","fov","h","cos_p","sin_p","cos_h","cos_p0","sin_p0","cos_h0","sin_h0","nDotD","nDotC","abs","t","tx","ty","tz","vx","vy","vz","uz","povToPixel2d","hfov","vfov","dh","wrapHeading","chrome","Point","clickable","Size","OverlayView","MarkerCreator","ReactDOM","createPortal","e","mapOptions","events","markers","labelMode","handleStreetViewClick","_map","_mapOptions","_streetViewOptions","Map","isEqual","street","onPanoChanged","getPano","getPosition","onPositionChanged","onPovChanged","onVisibleChanged","onZoomChanged","bindStreetViewEvents","markerOptions","Marker","markersInit","length","ExplorationWrapper","ExplorationContainer","ExplorationPanel","ExplorationCover","ExplorationShowcase","select","ImageListContainer","scroll","ExplorationBtnGroup","ShowcaseText","finished","ShowcaseButton","NextButton","CaptureButton","GetImageButton","CaptureButtonTips","fetchURL","round","getFov","fetchGoogleStreetView","link","get","responseType","fetchMetadata","defaultInfo","CaptureExploration","showWhichBtn","locationInfo","imageList","_first","previewImg","setPreviewImg","imgBlob","setImgBlob","saveStreetViewImageInRedux","newMetaData","status","streetViewImages","handlePosition","mapInfo","saveReduxPov","capturePano","captureLocation","capturePov","handleGetImageButton","URL","createObjectURL","newImgSrc","warning","center","setCenter","toString","disabled","put","uploadImage","EditCaptureLabelPage","params","useParams","streetViewMarkerList","NotFound","subTitle","extra","AppWrapper","App","PureValidation","exact","tempPano","mapReducer","yaw","userReducer","combineReducers","store","createStore","rootReducer","composeWithDevTools","getElementById"],"mappings":"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","file":"static/js/main.48dd159f.chunk.js","sourcesContent":["import { css } from \"styled-components\";\r\n\r\nexport const REM = (pixel) => `${pixel / 16}rem`;\r\n\r\nconst phone = 380;\r\nconst tablet = 640;\r\nconst laptop = 1024;\r\nconst desktop = 1400;\r\n\r\nexport const X_SMALL = \"xSmall\";\r\nexport const SMALL = \"small\";\r\nexport const MEDIUM = \"medium\";\r\nexport const LARGE = \"large\";\r\nexport const X_LARGE = \"xLarge\";\r\n\r\nexport const BREAKPOINT_UP = {\r\n\tsmall: REM(phone),\r\n\tmedium: REM(tablet),\r\n\tlarge: REM(laptop),\r\n\txLarge: REM(desktop),\r\n};\r\n\r\nexport const BREAKPOINT_DOWN = {\r\n\txSmall: REM(phone - 1),\r\n\tsmall: REM(tablet - 1),\r\n\tmedium: REM(laptop - 1),\r\n\tlarge: REM(desktop - 1),\r\n};\r\n\r\nexport const greaterThan = (size, content) => css`\r\n\t@media screen and (min-width: ${BREAKPOINT_UP[size]}) {\r\n\t\t${content}\r\n\t}\r\n`;\r\n\r\nexport const lessThan = (size, content) => css`\r\n\t@media screen and (max-width: ${BREAKPOINT_DOWN[size]}) {\r\n\t\t${content}\r\n\t}\r\n`;\r\n\r\n// When the screen size is less than or equal to small screen.\r\nexport const hide_for_mobile = lessThan(MEDIUM, \"display: none\");\r\n\r\n// When the screen size is greater than or equal to small screen.\r\nexport const hide_for_desktop = greaterThan(LARGE, \"display: none\");\r\n","import Curve from \"../../images/curve.svg\";\r\nimport Girl from \"../../images/girl.png\";\r\nimport Man from \"../../images/man.jpg\";\r\n\r\nexport const CarouselData = {\r\n\tcurve: Curve,\r\n\tslides: [\r\n\t\t{\r\n\t\t\ticon: Girl,\r\n\t\t\tname: \"mary\",\r\n\t\t\tcontent: \"Awesome application!\",\r\n\t\t},\r\n\t\t{\r\n\t\t\ticon: Man,\r\n\t\t\tname: \"John\",\r\n\t\t\tcontent: \"I cannot imagine I can help people with simple mouse clicking.\",\r\n\t\t},\r\n\t],\r\n};\r\n","export default __webpack_public_path__ + \"static/media/curve.78513b22.svg\";","export default __webpack_public_path__ + \"static/media/girl.b119a21d.png\";","export default __webpack_public_path__ + \"static/media/man.6a157112.jpg\";","import styled, { css } from \"styled-components/macro\";\r\nimport { REM, lessThan, MEDIUM, SMALL, X_SMALL } from \"../../style/helper\";\r\n\r\nexport const CarouselWrapper = styled.section`\r\n\tposition: relative;\r\n`;\r\n\r\nexport const CarouselIllustration = styled.img`\r\n\twidth: 100vw;\r\n`;\r\n\r\nexport const SwiperSlide = styled.div`\r\n\ttext-align: center;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tflex-direction: column;\r\n`;\r\n\r\nexport const SwiperCover = styled.div`\r\n\ttransform: translateY(-10%);\r\n`;\r\n\r\nexport const SlideContainer = styled.div`\r\n\tposition: relative;\r\n\theight: ${REM(500)};\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\theight: ${REM(600)};\r\n\t\t`\r\n\t)}\r\n`;\r\n\r\nexport const SlideIcon = styled.img`\r\n\tposition: absolute;\r\n\twidth: ${REM(100)};\r\n\theight: ${REM(100)};\r\n\tborder-radius: 50%;\r\n\tleft: 50%;\r\n\ttransform: translateX(-50%);\r\n`;\r\n\r\nexport const SlideCover = styled.div`\r\n\tmargin-top: 150px;\r\n\twidth: 635px;\r\n\theight: 275px;\r\n\tbackground: #ffffff;\r\n\tbox-shadow: 0px 4px 10px 8px rgba(0, 0, 0, 0.25);\r\n\tborder-radius: 20px;\r\n\tcolor: black;\r\n\tpadding: 30px 40px;\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\twidth: 500px;\r\n\t\t\theight: 300px;\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\twidth: 400px;\r\n\t\t\theight: 330px;\r\n\t\t\t/* margin: 0 auto; */\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\twidth: 300px;\r\n\t\t\t/* height: 30px; */\r\n\t\t\tpadding: 4px;\r\n\t\t`\r\n\t)}\r\n`;\r\n\r\nexport const SlideName = styled.p`\r\n\tfont-weight: 500;\r\n\tfont-size: ${REM(24)};\r\n\t/* width: 500px; */\r\n\ttext-align: center;\r\n\ttext-transform: uppercase;\r\n`;\r\nexport const SlideContent = styled.p`\r\n\tfont-weight: 500;\r\n\tfont-size: ${REM(18)};\r\n\tmargin-top: ${REM(30)};\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\tmargin-top: ${REM(20)};\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\tmargin-top: ${REM(40)};\r\n\t\t`\r\n\t)}\r\n`;\r\n\r\nexport const NavigationButton = styled.div`\r\n\t${(props) => props.left && \"margin-left: 200px;\"}\r\n\t${(props) => props.right && \"margin-right: 200px;\"} \r\n    color: #ffffff;\r\n\tbackground: #d6974d;\r\n\tbox-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n\twidth: 100px;\r\n\theight: 100px;\r\n\tborder-radius: 50%;\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\t${(props) => props.left && \"margin-left: 20px;\"}\r\n\t\t\t${(props) => props.right && \"margin-right: 20px;\"}\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\t${(props) => props.left && \"margin-left: 10px;\"}\r\n\t\t\t${(props) => props.right && \"margin-right: 10px;\"}\r\n            width: 80px;\r\n\t\t\theight: 80px;\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\t${(props) => props.left && \"margin-left: 4px;\"}\r\n\t\t\t${(props) => props.right && \"margin-right: 4px;\"}\r\n            width: 0;\r\n\t\t\theight: 0;\r\n\t\t\tcolor: #d6974d;\r\n\t\t`\r\n\t)}\r\n`;\r\n\r\nexport const SwiperContainer = styled.div`\r\n\tposition: relative;\r\n\theight: 500px;\r\n`;\r\n\r\nexport const SwiperWrapper = styled.div``;\r\n","import React from \"react\";\r\n// import Swiper JS\r\nimport Swiper, { Navigation } from \"swiper\";\r\n// import Swiper styles\r\nimport \"swiper/swiper-bundle.css\";\r\nimport { CarouselData } from \"./data\";\r\nimport {\r\n\tCarouselIllustration,\r\n\tCarouselWrapper,\r\n\tNavigationButton,\r\n\tSlideContainer,\r\n\tSlideContent,\r\n\tSlideCover,\r\n\tSlideIcon,\r\n\tSlideName,\r\n\tSwiperContainer,\r\n\tSwiperCover,\r\n\tSwiperSlide,\r\n\tSwiperWrapper,\r\n} from \"./CarouselStyle\";\r\n\r\nSwiper.use([Navigation]);\r\n\r\nexport default function Carousel() {\r\n\tReact.useEffect(() => {\r\n\t\tnew Swiper(\".swiper-container\", {\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: \".swiper-button-next\",\r\n\t\t\t\tprevEl: \".swiper-button-prev\",\r\n\t\t\t},\r\n\t\t});\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<CarouselWrapper>\r\n\t\t\t<CarouselIllustration src={CarouselData.curve} alt=\"curve\" />\r\n\t\t\t<SwiperCover>\r\n\t\t\t\t<SwiperContainer className=\"swiper-container\">\r\n\t\t\t\t\t<SwiperWrapper className=\"swiper-wrapper\">\r\n\t\t\t\t\t\t{CarouselData.slides.map((slide, index) => (\r\n\t\t\t\t\t\t\t<SwiperSlide className=\"swiper-slide\" key={index}>\r\n\t\t\t\t\t\t\t\t<SlideContainer>\r\n\t\t\t\t\t\t\t\t\t<SlideIcon src={slide.icon} alt=\"icon\" />\r\n\t\t\t\t\t\t\t\t\t<SlideCover>\r\n\t\t\t\t\t\t\t\t\t\t<SlideName className=\"test\">{slide.name}</SlideName>\r\n\t\t\t\t\t\t\t\t\t\t<SlideContent>{slide.content}</SlideContent>\r\n\t\t\t\t\t\t\t\t\t</SlideCover>\r\n\t\t\t\t\t\t\t\t</SlideContainer>\r\n\t\t\t\t\t\t\t</SwiperSlide>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</SwiperWrapper>\r\n\t\t\t\t\t<NavigationButton right className=\"swiper-button-next\" />\r\n\t\t\t\t\t<NavigationButton left className=\"swiper-button-prev\" />\r\n\t\t\t\t</SwiperContainer>\r\n\t\t\t</SwiperCover>\r\n\t\t</CarouselWrapper>\r\n\t);\r\n}\r\n","import styled, { createGlobalStyle, css } from \"styled-components\";\r\nimport { lessThan, MEDIUM } from \"./helper\";\r\n\r\nexport const GlobalStyle = createGlobalStyle`\r\n *{\r\n\t margin: 0;\r\n\t padding: 0;\r\n\t box-sizing: border-box;\r\n\t font-family: 'Poppins', sans-serif;\r\n }\r\n ul{\r\n\t list-style:none;\r\n }\r\n a{\r\n\t text-decoration: none;\r\n }\r\n`;\r\n\r\nexport const Container = styled.div`\r\n\tmax-width: 1256px;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tflex-direction: ${(props) => (props.reverse ? \"row-reverse\" : \"row\")};\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\tflex-direction: column;\r\n\t\t`\r\n\t)}\r\n`;\r\n","export default __webpack_public_path__ + \"static/media/location.74cf94a2.svg\";","export default __webpack_public_path__ + \"static/media/question.9741b1f2.svg\";","import Location from \"../../images/location.svg\";\r\nimport QuestionMark from \"../../images/question.svg\";\r\nimport Dot from \"../../images/dot.svg\";\r\n\r\nexport const FirstSectionData = {\r\n\ttitle: \"The Problem\",\r\n\tcontent: `Despite comprehensive civil rights legislation for Americans with disabilities, many city streets, sidewalks, and businesses in the U.S. remain inaccessible. We even can't  answer simple questions like, \"Can I get there from here?\", because we miss the specific data. `,\r\n\tillustration: Location,\r\n\tdot: Dot,\r\n\tquestionMark: QuestionMark,\r\n};\r\n","export default __webpack_public_path__ + \"static/media/dot.80e5d2fb.svg\";","import styled, { css } from \"styled-components/macro\";\r\nimport { lessThan, MEDIUM, REM, X_SMALL, SMALL } from \"../../style/helper\";\r\n\r\nexport const FirstSectionWrapper = styled.section`\r\n\theight: ${REM(810)};\r\n\tbackground-color: rgba(225, 207, 185, 0.15);\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\theight: ${REM(980)};\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\tjustify-content: start;\r\n\t\t\tpadding-left: 30px;\r\n\t\t`\r\n\t)};\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\tjustify-content: start;\r\n\t\t\tpadding-left: 0;\r\n\t\t\theight: ${REM(850)};\r\n\t\t`\r\n\t)};\r\n`;\r\n\r\nexport const FirstSectionIllustration = styled.img`\r\n\tmargin-left: ${REM(110)};\r\n\twidth: 45%;\r\n\ttransform: translateY(-10%);\r\n\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\tmargin-left: ${REM(0)};\r\n\t\t\twidth: ${REM(500)};\r\n\t\t\ttransform: translateY(0);\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\twidth: ${REM(400)};\r\n\t\t\tmargin-left: ${REM(0)};\r\n\t\t`\r\n\t)};\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\twidth: ${REM(340)};\r\n\t\t\ttransform: translateX(4%);\r\n\t\t`\r\n\t)};\r\n`;\r\n\r\nexport const FirstSectionBox = styled.div`\r\n\tposition: relative;\r\n\tpadding-right: ${REM(180)};\r\n\ttransform: translateY(-30%);\r\n\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\tmargin-top: ${REM(50)};\r\n\t\t\tpadding-right: ${REM(0)};\r\n\t\t\tpadding-bottom: ${REM(80)};\r\n\t\t\ttransform: translateY(0);\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\tpadding-bottom: ${REM(200)};\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\tpadding-bottom: ${REM(100)};\r\n\t\t`\r\n\t)}\r\n`;\r\n\r\nexport const FirstSectionContent = styled.div`\r\n\tbackground-color: #ffffff;\r\n\tbox-shadow: 0px 0px 13px 8px rgba(0, 0, 0, 0.25);\r\n\tborder-radius: 20px;\r\n\tposition: absolute;\r\n\ttop: ${REM(100)};\r\n\tleft: ${REM(100)};\r\n\tpadding: ${REM(25)};\r\n\tz-index: 0;\r\n\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\twidth: 120%;\r\n\t\t\ttop: 90px;\r\n\t\t\tleft: 90px;\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\twidth: 90%;\r\n\t\t\ttop: 60px;\r\n\t\t\tleft: 60px;\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\tposition: inherit;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 12px;\r\n\t\t\twidth: 100%;\r\n\t\t\tmargin: 0 auto;\r\n\t\t`\r\n\t)}\r\n`;\r\n\r\nexport const FirstSectionTitle = styled.h2`\r\n\tfont-size: ${REM(36)};\r\n\tfont-weight: bold;\r\n\tcolor: ${(props) => props.theme.primaryFont};\r\n\tmargin-bottom: ${REM(10)};\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\tfont-size: ${REM(28)};\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\ttext-align: center;\r\n\t\t`\r\n\t)}\r\n`;\r\n\r\nexport const FirstSectionText = styled.p`\r\n\t/* width: ${REM(455)}; */\r\n\tfont-weight: 500;\r\n\tfont-size: ${REM(18)};\r\n\tline-height: ${REM(40)};\r\n\tcolor: ${(props) => props.theme.primaryFont};\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\tfont-size: ${REM(14)};\r\n\t\t\twidth: 100%;\r\n\t\t\t/* width: ${REM(380)}; */\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\twidth: ${REM(300)};\r\n\t\t\tfont-size: ${REM(14)};\r\n\t\t`\r\n\t)}\r\n`;\r\n\r\nexport const DotBackground = styled.img`\r\n\tz-index: 10;\r\n\twidth: 100%;\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\t/* width: ${REM(510)}; */\r\n\t\t\twidth: 80%;\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\tdisplay: none;\r\n\t\t`\r\n\t)}\r\n`;\r\n\r\nexport const QuestionMark = styled.img`\r\n\tposition: absolute;\r\n\ttop: -14%;\r\n\tright: 0;\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\twidth: 35%;\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\tdisplay: none;\r\n\t\t`\r\n\t)}\r\n`;\r\n","import React from \"react\";\r\nimport { Container } from \"../../style/globalStyle\";\r\nimport { FirstSectionData } from \"./data\";\r\nimport {\r\n\tFirstSectionWrapper,\r\n\tFirstSectionIllustration,\r\n\tFirstSectionContent,\r\n\tFirstSectionTitle,\r\n\tFirstSectionText,\r\n\tDotBackground,\r\n\tFirstSectionBox,\r\n\tQuestionMark,\r\n} from \"./FirstSectionStyle\";\r\n\r\nexport default function FirstSection() {\r\n\treturn (\r\n\t\t<FirstSectionWrapper>\r\n\t\t\t<Container>\r\n\t\t\t\t<FirstSectionBox>\r\n\t\t\t\t\t<FirstSectionContent>\r\n\t\t\t\t\t\t<FirstSectionTitle>{FirstSectionData.title}</FirstSectionTitle>\r\n\t\t\t\t\t\t<FirstSectionText>{FirstSectionData.content}</FirstSectionText>\r\n\t\t\t\t\t\t<QuestionMark\r\n\t\t\t\t\t\t\tsrc={FirstSectionData.questionMark}\r\n\t\t\t\t\t\t\talt=\"QuestionMark\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FirstSectionContent>\r\n\t\t\t\t\t<DotBackground src={FirstSectionData.dot} alt=\"dot\" />\r\n\t\t\t\t</FirstSectionBox>\r\n\t\t\t\t<FirstSectionIllustration\r\n\t\t\t\t\tsrc={FirstSectionData.illustration}\r\n\t\t\t\t\talt=\"illustration\"\r\n\t\t\t\t/>\r\n\t\t\t</Container>\r\n\t\t</FirstSectionWrapper>\r\n\t);\r\n}\r\n","export default __webpack_public_path__ + \"static/media/Email.764fd95d.svg\";","export default __webpack_public_path__ + \"static/media/GitHub.01dee938.svg\";","export default __webpack_public_path__ + \"static/media/Facebook.8b7c2992.svg\";","import Email from \"../../images/Email.svg\";\r\nimport GitHub from \"../../images/GitHub.svg\";\r\nimport Facebook from \"../../images/Facebook.svg\";\r\nimport Twitter from \"../../images/Twitter.svg\";\r\n\r\nexport const FooterData = {\r\n\tproject: \"project\",\r\n\tprojectList: [\"About Us\", \"Term of Use\", \"Labeling Guide\"],\r\n\tconnect: \"connect\",\r\n\tconnectList: [\r\n\t\t{\r\n\t\t\ticon: GitHub,\r\n\t\t\tcontent: \"GitHub\",\r\n\t\t},\r\n\t\t{\r\n\t\t\ticon: Twitter,\r\n\t\t\tcontent: \"Twitter\",\r\n\t\t},\r\n\t\t{\r\n\t\t\ticon: Email,\r\n\t\t\tcontent: \"Email\",\r\n\t\t},\r\n\t\t{\r\n\t\t\ticon: Facebook,\r\n\t\t\tcontent: \"Facebook\",\r\n\t\t},\r\n\t],\r\n\tcopyRight: `© 2021 Doorfront. All Rights Reserved.`,\r\n};\r\n","export default __webpack_public_path__ + \"static/media/Twitter.a5eed533.svg\";","import styled, { css } from \"styled-components/macro\";\r\nimport { REM, lessThan, MEDIUM, SMALL } from \"../../style/helper\";\r\n\r\nexport const FooterWrapper = styled.footer`\r\n  height: ${REM(377)};\r\n  background: #484646;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: #fff;\r\n`;\r\n\r\nexport const FooterContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  width: ${REM(485)};\r\n  height: ${REM(220)};\r\n  ${lessThan(\r\n    SMALL,\r\n    css`\r\n      width: ${REM(285)};\r\n    `\r\n  )}\r\n`;\r\n\r\nexport const ListTitle = styled.p`\r\n  font-weight: bolder;\r\n  font-size: ${REM(16)};\r\n  text-transform: uppercase;\r\n`;\r\n\r\nexport const ProjectList = styled.ul``;\r\n\r\nexport const ProjectItem = styled.li`\r\n  margin-top: ${REM(6)};\r\n  box-sizing: border-box;\r\n`;\r\n\r\nexport const ConnectList = styled.ul``;\r\n\r\nexport const ConnectItem = styled.li`\r\n  height: ${REM(35)};\r\n  width: 100%;\r\n  padding: ${REM(5)} 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nexport const ConnectIcon = styled.img``;\r\n\r\nexport const ConnectText = styled.p`\r\n  margin-left: ${REM(4)};\r\n  margin-bottom: 0;\r\n`;\r\n\r\nexport const Divider = styled.div`\r\n  width: ${REM(955)};\r\n  border: 2px solid #ffffff;\r\n  ${lessThan(\r\n    MEDIUM,\r\n    css`\r\n      width: 100%;\r\n    `\r\n  )}\r\n`;\r\n\r\nexport const CopyRight = styled.p`\r\n  font-weight: bold;\r\n  font-size: ${REM(12)};\r\n  margin-top: ${REM(20)};\r\n`;\r\n\r\nexport const ProjectLink = styled.a`\r\n  font-weight: 500;\r\n  font-size: ${REM(14)};\r\n  color: #fff;\r\n  &:hover {\r\n    border-bottom: 1px solid #fff;\r\n  }\r\n`;\r\n\r\nexport const ConnectLink = styled.a`\r\n  display: flex;\r\n  color: #fff;\r\n  &:hover {\r\n    border-bottom: 1px solid #fff;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { FooterData } from \"./data\";\r\nimport {\r\n\tConnectIcon,\r\n\tConnectItem,\r\n\tConnectLink,\r\n\tConnectList,\r\n\tConnectText,\r\n\tCopyRight,\r\n\tDivider,\r\n\tFooterContainer,\r\n\tFooterWrapper,\r\n\tListTitle,\r\n\tProjectItem,\r\n\tProjectLink,\r\n\tProjectList,\r\n} from \"./FooterStyle\";\r\n\r\nexport default function Footer() {\r\n\treturn (\r\n\t\t<FooterWrapper>\r\n\t\t\t<FooterContainer>\r\n\t\t\t\t<ProjectList>\r\n\t\t\t\t\t<ListTitle>{FooterData.project}</ListTitle>\r\n\t\t\t\t\t{FooterData.projectList.map((item, index) => (\r\n\t\t\t\t\t\t<ProjectItem key={index}>\r\n\t\t\t\t\t\t\t<ProjectLink href=\"/\">{item}</ProjectLink>\r\n\t\t\t\t\t\t</ProjectItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</ProjectList>\r\n\t\t\t\t<ConnectList>\r\n\t\t\t\t\t<ListTitle>{FooterData.connect}</ListTitle>\r\n\t\t\t\t\t{FooterData.connectList.map((item, index) => (\r\n\t\t\t\t\t\t<ConnectItem key={index}>\r\n\t\t\t\t\t\t\t<ConnectLink href=\"/\">\r\n\t\t\t\t\t\t\t\t<ConnectIcon src={item.icon} alt={`icon${index}`} />\r\n\t\t\t\t\t\t\t\t<ConnectText>{item.content}</ConnectText>\r\n\t\t\t\t\t\t\t</ConnectLink>\r\n\t\t\t\t\t\t</ConnectItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</ConnectList>\r\n\t\t\t</FooterContainer>\r\n\t\t\t<Divider />\r\n\t\t\t<CopyRight>{FooterData.copyRight}</CopyRight>\r\n\t\t</FooterWrapper>\r\n\t);\r\n}\r\n","import styled, { css } from \"styled-components/macro\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { hide_for_desktop, hide_for_mobile, REM } from \"../../style/helper\";\r\n\r\nconst circleStyle = css`\r\n  border: 1px solid\r\n    ${(props) =>\r\n      props.primary === \"white\" ? props.theme.primaryFont : \"white\"};\r\n  filter: drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.25));\r\n  border-radius: 30px;\r\n  padding: 6px 14px;\r\n  &:hover {\r\n    border: 1px solid #d6974d;\r\n  }\r\n`;\r\n\r\nconst fixedStyle = css`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  /* max-width: 1256px; */\r\n`;\r\n\r\nexport const NavbarWrapper = styled.nav`\r\n  z-index: 110;\r\n  background-color: transparent;\r\n  position: relative;\r\n  ${(props) => props.isStatic && \"min-width: 1256px;\"}\r\n  ${(props) =>\r\n    props.primary === \"white\" &&\r\n    css`\r\n      background: rgba(255, 255, 255, 0.9);\r\n      box-shadow: 0px 4px 10px 6px rgba(0, 0, 0, 0.25);\r\n      color: ${props.theme.primaryFont};\r\n    `}\r\n\t${(props) => props.isFixed && fixedStyle}\r\n`;\r\n\r\nexport const NavbarContainer = styled.div`\r\n  ${(props) => (props.isStatic ? \"width: 1256px;\" : \"max-width: 1256px;\")}\r\n  /* max-width: 1256px; */\r\n\tmargin: auto;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  height: ${REM(90)};\r\n  padding: 0 30px;\r\n  z-index: 110;\r\n`;\r\n\r\nexport const NavbarLogo = styled.div`\r\n  z-index: 110;\r\n`;\r\n\r\nexport const Logo = styled.img``;\r\n\r\nexport const NavbarHamburger = styled.div`\r\n  color: ${(props) =>\r\n    props.primary === \"white\" ? props.theme.primaryFont : \"white\"};\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  z-index: 110;\r\n  ${hide_for_desktop}\r\n`;\r\n\r\nexport const NavbarList = styled.ul`\r\n  list-style: none;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-top: ${REM(16)};\r\n  ${(props) => !props.isStatic && hide_for_mobile}\r\n`;\r\n\r\nexport const NavbarItem = styled.li`\r\n  margin: 0 ${REM(38)};\r\n`;\r\n\r\nexport const NavbarLink = styled(NavLink)`\r\n  text-decoration: none;\r\n  color: ${(props) =>\r\n    props.primary === \"white\" ? props.theme.primaryFont : \"white\"};\r\n  font-size: ${REM(18)};\r\n  ${(props) => props.size && circleStyle}\r\n  &:hover {\r\n    color: #d6974d;\r\n    /* font-weight: bolder; */\r\n  }\r\n`;\r\nconst blackBackground = css`\r\n  background: #000000; /* fallback for old browsers */\r\n  background: -webkit-linear-gradient(\r\n    to left,\r\n    #434343,\r\n    #000000\r\n  ); /* Chrome 10-25, Safari 5.1-6 */\r\n  background: linear-gradient(\r\n    to left,\r\n    #434343,\r\n    #000000\r\n  ); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\r\n`;\r\nconst whiteBackground = css`\r\n  background: #ece9e6; /* fallback for old browsers */\r\n  background: -webkit-linear-gradient(\r\n    to left,\r\n    #ffffff,\r\n    #ece9e6\r\n  ); /* Chrome 10-25, Safari 5.1-6 */\r\n  background: linear-gradient(\r\n    to left,\r\n    #ffffff,\r\n    #ece9e6\r\n  ); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\r\n`;\r\nexport const MobileMenu = styled.ul`\r\n  position: fixed;\r\n  left: 0;\r\n  top: 0;\r\n  padding-top: ${REM(90)};\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: ${(props) =>\r\n    props.primary === \"white\" ? \"white\" : \"black\"};\r\n  transition: all 4s;\r\n  &::after {\r\n    content: \"\";\r\n    display: block;\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    ${(props) =>\r\n      props.primary === \"white\" ? whiteBackground : blackBackground}\r\n\r\n    z-index: 100;\r\n  }\r\n`;\r\n\r\nexport const MobileItem = styled.li`\r\n  padding: 20px 0px;\r\n  font-size: ${REM(34)};\r\n  text-align: center;\r\n  cursor: pointer;\r\n  width: 100%;\r\n  z-index: 110;\r\n  &:hover {\r\n    background-color: #d6974d;\r\n    font-weight: bolder;\r\n  }\r\n`;\r\n\r\nexport const MobileLink = styled(NavLink)`\r\n  text-decoration: none;\r\n  color: ${(props) =>\r\n    props.primary === \"white\" ? props.theme.primaryFont : \"white\"};\r\n  font-size: ${REM(28)};\r\n  &:hover {\r\n    color: ${(props) =>\r\n      props.primary === \"white\" ? props.theme.primaryFont : \"white\"};\r\n  }\r\n`;\r\n","export const ID = \"id\";\r\nexport const TOKEN = \"token\";\r\nexport const NICKNAME = \"nickname\";\r\n\r\nexport const saveLocal = (key, value) => {\r\n  localStorage.setItem(key, value);\r\n};\r\nexport const readLocal = (key) => {\r\n  return localStorage.getItem(key);\r\n};\r\nexport const deleteLocal = (key) => {\r\n  localStorage.removeItem(key);\r\n};\r\n\r\nexport const deleteAllLocal = () => {\r\n  deleteLocal(ID);\r\n  deleteLocal(TOKEN);\r\n  deleteLocal(NICKNAME);\r\n};\r\n","export default __webpack_public_path__ + \"static/media/BigLogo.c62763f7.svg\";","export default __webpack_public_path__ + \"static/media/blackLogo.7deb7805.svg\";","// Images\r\nexport const HANDLE_MAP = \"HANDLE_MAP\";\r\nexport const HANDLE_PANO = \"HANDLE_PANO\";\r\nexport const SAVE_MAP = \"SAVE_MAP\";\r\nexport const SAVE_MAP_LIST = \"SAVE_MAP_LIST\";\r\nexport const HANDLE_COMPLETED = \"HANDLE_COMPLETED\";\r\nexport const HANDLE_PROGRESS = \"HANDLE_PROGRESS\";\r\nexport const HANDLE_EMPTY = \"HANDLE_EMPTY\";\r\n\r\n// Users\r\nexport const LOGIN = \"LOGIN\";\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Avatar, Popover, Button } from \"antd\";\r\nimport { LOGIN } from \"../../redux/actionTypes\";\r\nimport { deleteAllLocal } from \"../../utils/localStorage\";\r\n\r\nexport default function UserAvatar({ nickname }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const onLogout = () => {\r\n    dispatch({ type: LOGIN, payload: { id: \"\", token: \"\", nickname: \"\" } });\r\n    deleteAllLocal();\r\n  };\r\n\r\n  const content = (\r\n    <div>\r\n      <Button type=\"primary\" danger onClick={onLogout}>\r\n        Log Out\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Popover content={content} trigger=\"hover\">\r\n        <Avatar\r\n          style={{\r\n            backgroundColor: \"#D6974D\",\r\n            verticalAlign: \"middle\",\r\n            fontWeight: \"bolder\",\r\n            fontSize: \"18px\",\r\n          }}\r\n          size=\"large\"\r\n          gap={5}\r\n        >\r\n          {nickname ? nickname[0].toUpperCase() : \"Bad\"}\r\n        </Avatar>\r\n      </Popover>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  NavbarHamburger,\r\n  NavbarLogo,\r\n  NavbarWrapper,\r\n  NavbarList,\r\n  NavbarItem,\r\n  NavbarLink,\r\n  Logo,\r\n  NavbarContainer,\r\n  MobileMenu,\r\n  MobileItem,\r\n  MobileLink,\r\n} from \"./NavbarStyle\";\r\nimport { GoThreeBars, GoX } from \"react-icons/go\";\r\nimport { REM } from \"../../style/helper\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { NICKNAME, readLocal } from \"../../utils/localStorage\";\r\nimport WhiterLogo from \"../../images/BigLogo.svg\";\r\nimport BlackLogo from \"../../images/blackLogo.svg\";\r\nimport Fade from \"@material-ui/core/Grow\";\r\nimport UserAvatar from \"./UserAvatar\";\r\n\r\nexport default function Navbar({\r\n  primary = \"black\",\r\n  isStatic = false,\r\n  isFixed = false,\r\n}) {\r\n  const [showMenu, setShowMenu] = React.useState(false);\r\n  const logoSrc = primary === \"white\" ? BlackLogo : WhiterLogo;\r\n\r\n  // Redux\r\n  const { nickname } = useSelector((state) => state.user);\r\n\r\n  // LocalStorage\r\n  const localNickname = readLocal(NICKNAME);\r\n\r\n  const hasLogin = nickname || localNickname;\r\n\r\n  return (\r\n    <NavbarWrapper primary={primary} isStatic={isStatic} isFixed={isFixed}>\r\n      <NavbarContainer isStatic={isStatic}>\r\n        <NavbarLogo>\r\n          <NavbarLink to=\"/home\">\r\n            <Logo src={logoSrc} alt=\"BigLogo\" />\r\n          </NavbarLink>\r\n        </NavbarLogo>\r\n        {!isStatic && (\r\n          <NavbarHamburger\r\n            primary={primary}\r\n            onClick={() => setShowMenu(!showMenu)}\r\n          >\r\n            {showMenu ? (\r\n              <GoX style={{ fontSize: REM(36) }} />\r\n            ) : (\r\n              <GoThreeBars style={{ fontSize: REM(36) }} />\r\n            )}\r\n          </NavbarHamburger>\r\n        )}\r\n        <NavbarList isStatic={isStatic}>\r\n          <NavbarItem>\r\n            <NavbarLink primary={primary} to=\"/streetView\">\r\n              Start Exploring\r\n            </NavbarLink>\r\n          </NavbarItem>\r\n          <NavbarItem>\r\n            <NavbarLink primary={primary} to=\"/pureValidation\">\r\n              Validation\r\n            </NavbarLink>\r\n          </NavbarItem>\r\n          <NavbarItem>\r\n            {hasLogin ? (\r\n              <UserAvatar nickname={localNickname} />\r\n            ) : (\r\n              <NavbarLink size=\"circle\" primary={primary} to=\"/login\">\r\n                Sign In\r\n              </NavbarLink>\r\n            )}\r\n          </NavbarItem>\r\n        </NavbarList>\r\n      </NavbarContainer>\r\n      <Fade in={showMenu}>\r\n        <MobileMenu primary={primary}>\r\n          <MobileItem>\r\n            <MobileLink primary={primary} to=\"/streetView\">\r\n              Start Exploring\r\n            </MobileLink>\r\n          </MobileItem>\r\n          <MobileItem>\r\n            <MobileLink primary={primary} to=\"/pureValidation\">\r\n              Validation\r\n            </MobileLink>\r\n          </MobileItem>\r\n          <MobileItem>\r\n            {hasLogin ? (\r\n              <UserAvatar nickname={localNickname} />\r\n            ) : (\r\n              <MobileLink primary={primary} to=\"/login\">\r\n                Sign In\r\n              </MobileLink>\r\n            )}\r\n          </MobileItem>\r\n        </MobileMenu>\r\n      </Fade>\r\n    </NavbarWrapper>\r\n  );\r\n}\r\n","import styled, { css } from \"styled-components/macro\";\r\nimport { lessThan, SMALL, REM } from \"../../style/helper\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nexport const HeaderWrapper = styled.header`\r\n  /* width: 100vw; */\r\n  height: 100vh;\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  /* overflow-x: hidden; */\r\n`;\r\n\r\nexport const HeaderVideo = styled.video`\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  position: absolute;\r\n  z-index: 0;\r\n`;\r\n\r\nexport const Shade = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: 1;\r\n  background: rgba(196, 196, 196, 0.29);\r\n`;\r\n\r\nexport const HeaderContent = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  transform: translateY(-20%);\r\n  z-index: 12;\r\n  ${lessThan(\r\n    SMALL,\r\n    css`\r\n      transform: translateY(0%);\r\n    `\r\n  )}\r\n`;\r\n\r\nexport const HeaderTitleBox = styled.div`\r\n  text-align: center;\r\n  text-transform: uppercase;\r\n  margin-bottom: ${REM(14)};\r\n`;\r\nexport const HeaderTitle = styled.h2`\r\n  color: white;\r\n  font-weight: bold;\r\n  font-size: ${REM(48)};\r\n  ${lessThan(\r\n    SMALL,\r\n    css`\r\n      font-size: ${REM(34)};\r\n    `\r\n  )}\r\n`;\r\nexport const HeaderSubtitleBox = styled.div`\r\n  margin-bottom: ${REM(36)};\r\n`;\r\nexport const HeaderSubtitle = styled.p`\r\n  color: white;\r\n  font-weight: bold;\r\n  font-size: ${REM(18)};\r\n  padding: ${REM(4)} 0;\r\n  text-align: center;\r\n  ${lessThan(\r\n    SMALL,\r\n    css`\r\n      font-size: ${REM(14)};\r\n    `\r\n  )}\r\n`;\r\n\r\nexport const HeaderIcon = styled.img`\r\n  z-index: 12;\r\n  display: block;\r\n  position: absolute;\r\n  bottom: ${REM(30)};\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  ${lessThan(\r\n    SMALL,\r\n    css`\r\n      width: 5%;\r\n    `\r\n  )}\r\n`;\r\n\r\nexport const HeaderButton = styled(Button)`\r\n  background-color: ${(props) => props.theme.primaryColor} !important;\r\n  color: white !important;\r\n  padding: ${REM(7)} ${REM(36)} !important;\r\n  font-weight: 500 !important;\r\n  font-size: ${REM(24)} !important;\r\n  ${lessThan(\r\n    SMALL,\r\n    css`\r\n      font-size: ${REM(20)} !important;\r\n      padding: ${REM(3)} ${REM(24)} !important;\r\n    `\r\n  )}\r\n`;\r\n","export default __webpack_public_path__ + \"static/media/background.608cdf8f.mp4\";","import ScrollDown from \"../../images/scrollDown.svg\";\r\n\r\nexport const HeaderData = {\r\n\ttitle: {\r\n\t\tone: \"Help us to\",\r\n\t\ttwo: \"Explore the city\",\r\n\t},\r\n\tsubtitle: {\r\n\t\tone: \"Virtually explore city streets to find and\",\r\n\t\ttwo: \"label storefront accessibility target\",\r\n\t},\r\n\tbutton: \"explore\",\r\n\ticon: ScrollDown,\r\n};\r\n","export default __webpack_public_path__ + \"static/media/scrollDown.b740b291.svg\";","import React from \"react\";\r\nimport Navbar from \"../Navbar\";\r\nimport {\r\n\tHeaderWrapper,\r\n\tHeaderVideo,\r\n\tShade,\r\n\tHeaderTitleBox,\r\n\tHeaderSubtitleBox,\r\n\tHeaderTitle,\r\n\tHeaderSubtitle,\r\n\tHeaderIcon,\r\n\tHeaderButton,\r\n\tHeaderContent,\r\n} from \"./HeaderStyle\";\r\nimport Background from \"../../videos/background.mp4\";\r\nimport { useScroll } from \"../../hooks/useScroll\";\r\nimport { HeaderData } from \"./data\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nexport default function Header() {\r\n\tconst primary = useScroll();\r\n\treturn (\r\n\t\t<HeaderWrapper>\r\n\t\t\t<Navbar primary={primary} isFixed />\r\n\t\t\t<HeaderVideo muted loop autoPlay src={Background} />\r\n\t\t\t<Shade />\r\n\t\t\t<HeaderContent>\r\n\t\t\t\t<HeaderTitleBox>\r\n\t\t\t\t\t<HeaderTitle>{HeaderData.title.one}</HeaderTitle>\r\n\t\t\t\t\t<HeaderTitle>{HeaderData.title.two}</HeaderTitle>\r\n\t\t\t\t</HeaderTitleBox>\r\n\t\t\t\t<HeaderSubtitleBox>\r\n\t\t\t\t\t<HeaderSubtitle>{HeaderData.subtitle.one}</HeaderSubtitle>\r\n\t\t\t\t\t<HeaderSubtitle>{HeaderData.subtitle.two}</HeaderSubtitle>\r\n\t\t\t\t</HeaderSubtitleBox>\r\n\t\t\t\t<HeaderButton>\r\n\t\t\t\t\t<NavLink to=\"/streetView\" style={{ color: \"white\" }}>\r\n\t\t\t\t\t\t{HeaderData.button}\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</HeaderButton>\r\n\t\t\t</HeaderContent>\r\n\t\t\t<HeaderIcon src={HeaderData.icon} alt=\"scrollDown\" />\r\n\t\t</HeaderWrapper>\r\n\t);\r\n}\r\n","import React from \"react\";\r\n\r\nexport const useScroll = () => {\r\n\tconst [primary, setPrimary] = React.useState(\"black\");\r\n\tReact.useEffect(() => {\r\n\t\twindow.onscroll = () => {\r\n\t\t\tif (document.documentElement.scrollTop > 80) setPrimary(\"white\");\r\n\t\t\telse setPrimary(\"black\");\r\n\t\t};\r\n\t\t// fix the react problem:\r\n\t\t// https://stackoverflow.com/questions/54954385/react-useeffect-causing-cant-perform-a-react-state-update-on-an-unmounted-comp\r\n\t\treturn () => {\r\n\t\t\tsetPrimary(null); // This worked for me\r\n\t\t};\r\n\t}, [setPrimary]);\r\n\treturn primary;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/whole.6e3e4c4d.svg\";","import Whole from \"../../images/whole.svg\";\r\nimport Comma from \"../../images/comma.svg\";\r\n\r\nexport const SecondSectionData = {\r\n\ttitle: \"What we do with your labels\",\r\n\tcontent: `The way we do that is we virtually drop you into the scene in Google Streetview. Users label door area and identity different types of doors, as well as stairs and ramps. It aims for collecting more information to improve accessibility. \r\n    `,\r\n\twhole: Whole,\r\n\tcomma: Comma,\r\n};\r\n","export default __webpack_public_path__ + \"static/media/comma.48fe24c0.svg\";","import styled, { css } from \"styled-components/macro\";\r\nimport { lessThan, MEDIUM, REM, X_SMALL, SMALL } from \"../../style/helper\";\r\n\r\nexport const SecondSectionWrapper = styled.section`\r\n\theight: ${REM(644)};\r\n\tbackground-color: rgba(225, 207, 185, 0.15);\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\theight: ${REM(760)};\r\n\t\t\tpadding-top: ${REM(50)};\r\n\t\t\tpadding-bottom: ${REM(40)};\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\theight: ${REM(800)};\r\n\t\t\tjustify-content: start;\r\n\t\t\tpadding-left: 30px;\r\n\t\t\tpadding-right: 30px;\r\n\t\t`\r\n\t)};\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\tjustify-content: start;\r\n\t\t\tpadding-left: 0;\r\n\t\t\tpadding-right: 0;\r\n\t\t`\r\n\t)};\r\n`;\r\n\r\nexport const SecondSectionIllustration = styled.img`\r\n\twidth: 45%;\r\n\ttransform: translateY(-10%);\r\n\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\tmargin-left: ${REM(0)};\r\n\t\t\twidth: ${REM(500)};\r\n\t\t\ttransform: translateY(0);\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\twidth: ${REM(400)};\r\n\t\t\tmargin-left: ${REM(0)};\r\n\t\t`\r\n\t)};\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\twidth: ${REM(340)};\r\n\t\t\ttransform: translateX(4%);\r\n\t\t`\r\n\t)};\r\n`;\r\n\r\nexport const SecondSectionBox = styled.div`\r\n\tposition: relative;\r\n\tpadding-left: ${REM(120)};\r\n\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\tpadding-left: 0;\r\n\t\t\tmargin: auto;\r\n\t\t\twidth: 80%;\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\tpadding-bottom: ${REM(60)};\r\n\t\t`\r\n\t)} /* ${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\tpadding-bottom: ${REM(100)};\r\n\t\t`\r\n\t)} */\r\n`;\r\n\r\nexport const SecondSectionContent = styled.div`\r\n\t/* background-color: #ffffff; */\r\n\t/* box-shadow: 0px 0px 13px 8px rgba(0, 0, 0, 0.25); */\r\n\t/* border-radius: 20px; */\r\n\t/* position: absolute;\r\n\ttop: ${REM(100)};\r\n\tleft: ${REM(100)};\r\n\tpadding: ${REM(25)};\r\n\tz-index: 0; */\r\n\r\n\t/* ${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\twidth: 120%;\r\n\t\t\ttop: 90px;\r\n\t\t\tleft: 90px;\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\twidth: 90%;\r\n\t\t\ttop: 60px;\r\n\t\t\tleft: 60px;\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\tposition: inherit;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 12px;\r\n\t\t\twidth: 100%;\r\n\t\t\tmargin: 0 auto;\r\n\t\t`\r\n\t)} */\r\n`;\r\n\r\nexport const SecondSectionTitle = styled.h2`\r\n\tfont-size: ${REM(36)};\r\n\tfont-weight: bold;\r\n\tcolor: ${(props) => props.theme.primaryFont};\r\n\tmargin-bottom: ${REM(10)};\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\tfont-size: ${REM(28)};\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\ttext-align: center;\r\n\t\t`\r\n\t)}\r\n`;\r\n\r\nexport const SecondSectionText = styled.p`\r\n\twidth: 85%;\r\n\tfont-weight: 500;\r\n\tfont-size: ${REM(18)};\r\n\tline-height: ${REM(40)};\r\n\tcolor: ${(props) => props.theme.primaryFont};\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\tfont-size: ${REM(14)};\r\n\t\t\twidth: 100%;\r\n\t\t\t/* width: ${REM(380)}; */\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\twidth: ${REM(300)};\r\n\t\t\tfont-size: ${REM(14)};\r\n\t\t`\r\n\t)}\r\n`;\r\n\r\nexport const CommaMark = styled.img`\r\n\tposition: absolute;\r\n\ttop: -55%;\r\n\tright: 10%;\r\n\twidth: ${REM(140)};\r\n\t${lessThan(\r\n\t\tMEDIUM,\r\n\t\tcss`\r\n\t\t\twidth: ${REM(100)};\r\n\t\t\ttop: -35%;\r\n\t\t\tright: 10%;\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tSMALL,\r\n\t\tcss`\r\n\t\t\tdisplay: none;\r\n\t\t`\r\n\t)}\r\n\t${lessThan(\r\n\t\tX_SMALL,\r\n\t\tcss`\r\n\t\t\tdisplay: none;\r\n\t\t`\r\n\t)}\r\n`;\r\n","import React from \"react\";\r\nimport { Container } from \"../../style/globalStyle\";\r\nimport { SecondSectionData } from \"./data\";\r\nimport {\r\n\tSecondSectionWrapper,\r\n\tSecondSectionIllustration,\r\n\tSecondSectionContent,\r\n\tSecondSectionTitle,\r\n\tSecondSectionText,\r\n\tSecondSectionBox,\r\n\tCommaMark,\r\n} from \"./SecondSectionStyle\";\r\n\r\nexport default function SecondSection() {\r\n\treturn (\r\n\t\t<SecondSectionWrapper>\r\n\t\t\t<Container reverse>\r\n\t\t\t\t<SecondSectionBox>\r\n\t\t\t\t\t<SecondSectionContent>\r\n\t\t\t\t\t\t<SecondSectionTitle>{SecondSectionData.title}</SecondSectionTitle>\r\n\t\t\t\t\t\t<SecondSectionText>{SecondSectionData.content}</SecondSectionText>\r\n\t\t\t\t\t</SecondSectionContent>\r\n\t\t\t\t\t<CommaMark src={SecondSectionData.comma} alt=\"comma\" />\r\n\t\t\t\t</SecondSectionBox>\r\n\t\t\t\t<SecondSectionIllustration src={SecondSectionData.whole} alt=\"whole\" />\r\n\t\t\t</Container>\r\n\t\t</SecondSectionWrapper>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport Carousel from \"../../components/Carousel\";\r\nimport FirstSection from \"../../components/FirstSection\";\r\nimport Footer from \"../../components/Footer\";\r\nimport Header from \"../../components/Header\";\r\nimport SecondSection from \"../../components/SecondeSection\";\r\n\r\nexport default function Home() {\r\n  return (\r\n    <>\r\n      <Header />\r\n      <FirstSection />\r\n      <SecondSection />\r\n      <Carousel />\r\n      <Footer />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Route, Redirect, useLocation } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { readLocal, TOKEN } from \"../../utils/localStorage\";\r\n\r\nexport default function ProtectedRoute({\r\n  component: Component,\r\n  path,\r\n  ...rest\r\n}) {\r\n  const location = useLocation();\r\n\r\n  // Redux\r\n  const { token } = useSelector((state) => state.user);\r\n\r\n  // LocalStorage\r\n  const localToken = readLocal(TOKEN);\r\n\r\n  const hasLogin = token || localToken;\r\n\r\n  if (hasLogin)\r\n    return <Route path={path} render={() => <Component {...rest} />} />;\r\n  else return <Redirect from={location.pathname} to=\"/login\" />;\r\n}\r\n","import styled from \"styled-components/macro\";\r\nimport { Row, Col } from \"antd\";\r\n\r\nexport const SignUpWrapper = styled.div`\r\n  background-color: #fbf8f5;\r\n  height: 100vh;\r\n`;\r\n\r\nexport const SignUpContainer = styled(Row)`\r\n  margin-top: 60px;\r\n  background-color: #fbf8f5;\r\n`;\r\n\r\nexport const FormWrapper = styled(Col)`\r\n  /* margin: 0 60px; */\r\n`;\r\n\r\nexport const SignUpText = styled.p`\r\n  text-align: center;\r\n`;\r\n\r\nexport const TipText = styled.p`\r\n  text-align: center;\r\n  font-size: 70%;\r\n  color: gray;\r\n  margin-bottom: 0;\r\n`;\r\n","// eslint-disable-next-line\r\nconst reg = /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/;\r\n\r\nexport function testEmail(email) {\r\n\tif (reg.test(email)) return true;\r\n\treturn false;\r\n}\r\n","import axios from \"axios\";\r\nimport { message } from \"antd\";\r\nimport { readLocal, TOKEN } from \"../utils/localStorage\";\r\n\r\nexport const myService = axios.create({\r\n  baseURL: \"/api\",\r\n});\r\n\r\nmyService.interceptors.request.use(\r\n  (config) => {\r\n    const token = readLocal(TOKEN);\r\n    config.headers = {\r\n      authorization: \"bearer \" + token,\r\n    };\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nmyService.interceptors.response.use(\r\n  (res) => {\r\n    // console.log(\"res ->\", res);\r\n    if (res.data.code === 2000) {\r\n      message.error(res.data.message);\r\n      // window.location.href = \"/home\";\r\n    }\r\n    if (res.data.code === 4000) {\r\n      message.error(res.data.message);\r\n      return Promise.reject(res);\r\n    }\r\n    return Promise.resolve(res);\r\n  },\r\n  (error) => {\r\n    // console.log(\"Return Error\");\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n","import { myService } from \".\";\r\n\r\nexport const signUp = (data) =>\r\n  myService.request({\r\n    method: \"POST\",\r\n    url: `/user/addUser`,\r\n    data,\r\n  });\r\nexport const login = (data) =>\r\n  myService.request({\r\n    method: \"POST\",\r\n    url: `/user/login`,\r\n    data,\r\n  });\r\n\r\nexport const addImages = (data) =>\r\n  myService.request({\r\n    method: \"POST\",\r\n    url: `/user/addImages`,\r\n    data,\r\n  });\r\n","import React from \"react\";\r\nimport Navbar from \"../../components/Navbar\";\r\nimport { Form, Input, Button, Select, message } from \"antd\";\r\nimport {\r\n  FormWrapper,\r\n  SignUpContainer,\r\n  SignUpText,\r\n  SignUpWrapper,\r\n  TipText,\r\n} from \"./SignUpStyle\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport { testEmail } from \"../../utils/Reg\";\r\nimport { signUp } from \"../../api/user\";\r\n// import { useScroll } from \"../../hooks/useScroll\";\r\nconst { Option } = Select;\r\n\r\nexport default function SignUp() {\r\n  const [form] = Form.useForm();\r\n  const history = useHistory();\r\n  const onFinish = async (values) => {\r\n    const result = await signUp(values);\r\n    if (result.data.code === 0) {\r\n      message.success(result.data.message);\r\n      history.push(\"/login\");\r\n    } else form.resetFields();\r\n  };\r\n  const checkEmail = (_, value) => {\r\n    if (value === \"\") return Promise.resolve();\r\n    if (testEmail(value)) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.reject(new Error(\"Please input a valid email!\"));\r\n  };\r\n\r\n  const checkConfirmPassword = (_, value) => {\r\n    if (!value || form.getFieldValue(\"password\") === value) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.reject(\r\n      new Error(\"The two passwords that you entered do not match!\")\r\n    );\r\n  };\r\n\r\n  return (\r\n    <SignUpWrapper>\r\n      <Navbar primary={\"white\"} />\r\n      <SignUpContainer justify={\"center\"} align={\"middle\"}>\r\n        <FormWrapper span={20}>\r\n          <SignUpText>\r\n            <strong>Already have an account? </strong>\r\n            <NavLink to=\"/login\">Login</NavLink>\r\n          </SignUpText>\r\n          <Form\r\n            name=\"basic\"\r\n            form={form}\r\n            labelCol={{ span: 8 }}\r\n            wrapperCol={{ span: 8 }}\r\n            //initialValues={{ remember: true }}\r\n            onFinish={onFinish}\r\n          >\r\n            <Form.Item\r\n              label=\"Nickname\"\r\n              name=\"nickname\"\r\n              rules={[\r\n                { required: true, message: \"Please input your nickname!\" },\r\n              ]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n            <div>\r\n              <TipText>We encourage you to use your university email</TipText>\r\n              <Form.Item\r\n                label=\"Email\"\r\n                name=\"email\"\r\n                rules={[\r\n                  {\r\n                    validator: checkEmail,\r\n                  },\r\n                  { required: true, message: \"Please input your email!\" },\r\n                ]}\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n            </div>\r\n            <Form.Item\r\n              label=\"Password\"\r\n              name=\"password\"\r\n              rules={[\r\n                { required: true, message: \"Please input your password!\" },\r\n              ]}\r\n            >\r\n              <Input.Password />\r\n            </Form.Item>\r\n            <Form.Item\r\n              label=\"Confirm Password\"\r\n              name=\"confirm password\"\r\n              rules={[\r\n                {\r\n                  validator: checkConfirmPassword,\r\n                },\r\n                {\r\n                  required: true,\r\n                  message: \"Please input your confirm password!\",\r\n                },\r\n              ]}\r\n            >\r\n              <Input.Password />\r\n            </Form.Item>\r\n            <Form.Item\r\n              name=\"role\"\r\n              label=\"role\"\r\n              rules={[{ required: true, message: \"Please select role!\" }]}\r\n            >\r\n              <Select placeholder=\"select your role\">\r\n                <Option value=\"student\">Student</Option>\r\n                <Option value=\"faculty\">Faculty</Option>\r\n                <Option value=\"volunteer\">Volunteer</Option>\r\n              </Select>\r\n            </Form.Item>\r\n            <Form.Item\r\n              label=\"Institution\"\r\n              name=\"institution\"\r\n              rules={[\r\n                { required: true, message: \"Please input your institution!\" },\r\n              ]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Submit\r\n              </Button>\r\n            </Form.Item>\r\n          </Form>\r\n        </FormWrapper>\r\n      </SignUpContainer>\r\n    </SignUpWrapper>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/login-2.d1e20fde.jpg\";","import styled from \"styled-components/macro\";\r\nimport { Row, Col } from \"antd\";\r\n\r\nexport const LoginWrapper = styled.div`\r\n  background-color: #fbf8f5;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n`;\r\n\r\nexport const LoginContainer = styled(Row)`\r\n  /* margin-top: 80px; */\r\n`;\r\n\r\nexport const FormWrapper = styled(Col)`\r\n  /* margin-top: 80px; */\r\n  align-self: flex-start;\r\n`;\r\n\r\nexport const LoginText = styled.p`\r\n  /* margin-top: 80px; */\r\n  text-align: center;\r\n`;\r\nexport const ImageContainer = styled(Col)``;\r\n\r\nexport const LoginImage = styled.img`\r\n  height: 70%;\r\n`;\r\n\r\nexport const BlankSpace = styled.div`\r\n  margin-top: 30px;\r\n`;\r\n","import React from \"react\";\r\nimport Navbar from \"../../components/Navbar\";\r\nimport LoginImageBG from \"../../images/login-2.jpg\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Form, Input, Button, message, Row, Col } from \"antd\";\r\nimport {\r\n  FormWrapper,\r\n  LoginText,\r\n  LoginContainer,\r\n  ImageContainer,\r\n  LoginImage,\r\n  LoginWrapper,\r\n} from \"./LoginStyle\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport { testEmail } from \"../../utils/Reg\";\r\nimport { login } from \"../../api/user\";\r\nimport { LOGIN } from \"../../redux/actionTypes\";\r\nimport { ID, NICKNAME, saveLocal, TOKEN } from \"../../utils/localStorage\";\r\n\r\nexport default function Login() {\r\n  const [form] = Form.useForm();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  const onFinish = async (values) => {\r\n    const result = await login(values).catch(() => {\r\n      history.push(\"/home\");\r\n    });\r\n    if (result.data.code === 0) {\r\n      const { id, nickname, token } = result.data.data;\r\n      dispatch({ type: LOGIN, payload: { id, nickname, token } });\r\n      saveLocal(ID, id);\r\n      saveLocal(TOKEN, token);\r\n      saveLocal(NICKNAME, nickname);\r\n      message.success(result.data.message);\r\n      history.push(\"/home\");\r\n    }\r\n  };\r\n  const checkEmail = (_, value) => {\r\n    if (value === \"\") return Promise.resolve();\r\n    if (testEmail(value)) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.reject(new Error(\"Please input a valid email!\"));\r\n  };\r\n\r\n  return (\r\n    <LoginWrapper>\r\n      <Navbar primary={\"white\"} />\r\n      <LoginContainer justify={\"center\"} align={\"middle\"}>\r\n        <FormWrapper span={20} lg={6}>\r\n          <Row align=\"middle\" justify=\"center\" style={{ height: \"600px\" }}>\r\n            <Col span={20}>\r\n              <LoginText>\r\n                <strong>Don't have an account? </strong>\r\n                <NavLink to=\"/signUp\">Sign Up</NavLink>\r\n              </LoginText>\r\n              <Form\r\n                name=\"basic\"\r\n                labelCol={{ span: 8 }}\r\n                wrapperCol={{ span: 16 }}\r\n                form={form}\r\n                //initialValues={{ remember: true }}\r\n                onFinish={onFinish}\r\n              >\r\n                <Form.Item\r\n                  label=\"Email\"\r\n                  name=\"email\"\r\n                  rules={[\r\n                    {\r\n                      validator: checkEmail,\r\n                    },\r\n                    { required: true, message: \"Please input your email!\" },\r\n                  ]}\r\n                >\r\n                  <Input />\r\n                </Form.Item>\r\n                <Form.Item\r\n                  label=\"Password\"\r\n                  name=\"password\"\r\n                  rules={[\r\n                    { required: true, message: \"Please input your password!\" },\r\n                  ]}\r\n                >\r\n                  <Input.Password />\r\n                </Form.Item>\r\n\r\n                <Form.Item wrapperCol={{ sm: { offset: 8, span: 16 } }}>\r\n                  <Button type=\"primary\" htmlType=\"submit\">\r\n                    Log In\r\n                  </Button>\r\n                </Form.Item>\r\n              </Form>\r\n            </Col>\r\n          </Row>\r\n        </FormWrapper>\r\n        <ImageContainer lg={18}>\r\n          <LoginImage src={LoginImageBG} alt=\"login-1\" />\r\n        </ImageContainer>\r\n      </LoginContainer>\r\n    </LoginWrapper>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/SmallLogo.afb353d7.svg\";","import { myService } from \".\";\r\n\r\nexport const fetchRandomList = () =>\r\n  myService.request({\r\n    method: \"GET\",\r\n    url: \"/image/getRanList\",\r\n  });\r\n\r\nexport const fetchRandomImage = () =>\r\n  myService.request({\r\n    method: \"GET\",\r\n    url: \"/image/getRandomImage\",\r\n  });\r\n\r\nexport const fetchImage = (id) =>\r\n  myService.request({\r\n    method: \"GET\",\r\n    url: `/image/getOneById/${id}`,\r\n  });\r\nexport const fetchImagesByPano = (id) =>\r\n  myService.request({\r\n    method: \"GET\",\r\n    url: `/image/getImagesByPano/${id}`,\r\n  });\r\n\r\nexport const fetchToggle = (data) =>\r\n  myService.request({\r\n    method: \"POST\",\r\n    url: `/image/toggle`,\r\n    data,\r\n  });\r\n\r\nexport const addLabeledArea = (data) =>\r\n  myService.request({\r\n    method: \"POST\",\r\n    url: `/image/addLabelArea`,\r\n    data,\r\n  });\r\n","export const typeConfig = [\r\n  {\r\n    type: \"door\",\r\n    color: \"#F97F51\",\r\n    subtype: [\"Single\", \"Double\", \"Automatic\", \"Revolving\", \"Open\"],\r\n  },\r\n\r\n  {\r\n    type: \"knob\",\r\n    color: \"#9AECDB\",\r\n    subtype: [\"vBar\", \"Pull\", \"Round\", \"hBar\"],\r\n  },\r\n\r\n  {\r\n    type: \"ramp\",\r\n    color: \"#EAB543\",\r\n  },\r\n\r\n  {\r\n    type: \"stairs\",\r\n    color: \"#D6A2E8\",\r\n  },\r\n];\r\n\r\nconst WIDTH = 800;\r\nconst HEIGHT = 600;\r\n\r\nconst parseLabel = (label, image_size) => {\r\n  const x = (label.box.left * WIDTH) / image_size[0];\r\n  const y = (label.box.top * HEIGHT) / image_size[1];\r\n  const width = (label.box.width * WIDTH) / image_size[0];\r\n  const height = (label.box.height * HEIGHT) / image_size[1];\r\n  const subtype = label.subtype ? label.subtype : undefined;\r\n  return {\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    type: label.label,\r\n    id: label.label_id,\r\n    subtype,\r\n  };\r\n};\r\n\r\nexport const labelsDecorator = (list, image_size) => {\r\n  return list.map((item) => parseLabel(item, image_size));\r\n};\r\n\r\nconst reverseLabel = (item, image_size) => {\r\n  const left = (item.x * image_size[0]) / WIDTH;\r\n  const top = (item.y * image_size[1]) / HEIGHT;\r\n  const width = (item.width * image_size[0]) / WIDTH;\r\n  const height = (item.height * image_size[1]) / HEIGHT;\r\n  const subtype = item.subtype ? item.subtype : null;\r\n  return {\r\n    box: {\r\n      left,\r\n      top,\r\n      width,\r\n      height,\r\n    },\r\n    label_id: item.id,\r\n    subtype,\r\n    label: item.type,\r\n  };\r\n};\r\n\r\nexport const labelsReverser = (list, image_size = [3584, 2560]) => {\r\n  return list.map((item) => reverseLabel(item, image_size));\r\n};\r\n","import React from \"react\";\r\nimport Logo from \"../../images/SmallLogo.svg\";\r\nimport { Modal } from \"antd\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {\r\n  fetchToggle,\r\n  addLabeledArea,\r\n  fetchRandomImage,\r\n} from \"../../api/images\";\r\nimport { addImages } from \"../../api/user\";\r\nimport { ReactLabelTool } from \"@fgsurewin/react_labeltool\";\r\nimport { labelsDecorator, typeConfig, labelsReverser } from \"./utils\";\r\nimport { HANDLE_COMPLETED, LOGIN } from \"../../redux/actionTypes\";\r\nimport { deleteAllLocal } from \"../../utils/localStorage\";\r\n\r\nexport default function LabelPage() {\r\n  const [state, setState] = React.useState(null);\r\n  const _state = React.useRef(null);\r\n  const _mount = React.useRef(false);\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  const { progress } = useSelector((state) => state.map);\r\n  const { id: userId } = useSelector((state) => state.user);\r\n\r\n  const loadFunction = React.useCallback(\r\n    async function () {\r\n      try {\r\n        const { data } = await fetchRandomImage();\r\n        console.log(\"TEST -> \", data.data[0]);\r\n        _state.current = data.data[0];\r\n        setState(data.data[0]);\r\n        _mount.current = true;\r\n      } catch (_) {\r\n        console.log(_);\r\n        history.push(\"/login\");\r\n        deleteAllLocal();\r\n        dispatch({ type: LOGIN, payload: { id: \"\", token: \"\", nickname: \"\" } });\r\n      }\r\n    },\r\n    [dispatch, history]\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (!_mount.current) {\r\n      loadFunction();\r\n    }\r\n    return async () => {\r\n      try {\r\n        await fetchToggle({ labeled: false, id: _state.current[\"_id\"] });\r\n      } catch (_) {\r\n        history.push(\"/login\");\r\n        deleteAllLocal();\r\n        dispatch({ type: LOGIN, payload: { id: \"\", token: \"\", nickname: \"\" } });\r\n      }\r\n    };\r\n  }, [dispatch, history, loadFunction]);\r\n\r\n  const onCancel = async () => {\r\n    try {\r\n      await fetchToggle({\r\n        labeled: false,\r\n        id: state[\"_id\"],\r\n      });\r\n      Modal.confirm({\r\n        title: \"Warning Message\",\r\n        content: \"Do you want to leave without confirmation?\",\r\n        cancelText: \"Cancel\",\r\n        onCancel() {},\r\n        onOk() {\r\n          history.push(\"/home\");\r\n        },\r\n      });\r\n    } catch (_) {\r\n      history.push(\"/login\");\r\n      deleteAllLocal();\r\n      dispatch({ type: LOGIN, payload: { id: \"\", token: \"\", nickname: \"\" } });\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (value) => {\r\n    try {\r\n      await addLabeledArea({\r\n        id: state[\"_id\"],\r\n        labelArea: labelsReverser(value, state[\"image_size\"]),\r\n      });\r\n      dispatch({ type: HANDLE_COMPLETED, payload: state[\"_id\"] });\r\n      await fetchToggle({ labeled: false, id: state[\"_id\"] });\r\n      const number = progress + 10 === 100 ? 3 : 1;\r\n      await addImages({ id: userId, number });\r\n\r\n      // Get new image\r\n      _mount.current = false;\r\n      loadFunction();\r\n    } catch (_) {\r\n      history.push(\"/login\");\r\n      deleteAllLocal();\r\n      dispatch({ type: LOGIN, payload: { id: \"\", token: \"\", nickname: \"\" } });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {state && (\r\n        <ReactLabelTool\r\n          Logo={Logo}\r\n          typeConfig={typeConfig}\r\n          labels={labelsDecorator(state[\"labeled_area\"], state[\"image_size\"])}\r\n          imgUrl={state.url}\r\n          handleSubmit={onSubmit}\r\n          handleBack={onCancel}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","export const defaultStreetViewOptions = {\r\n  zoomControl: false,\r\n  scrollwheel: false,\r\n  fullscreenControl: false,\r\n  panControl: false,\r\n  linksControl: false,\r\n  disableDefaultUI: true,\r\n  clickToGo: false,\r\n};\r\n\r\nexport const combineStreetViewOptions = (options) =>\r\n  Object.assign({}, options, defaultStreetViewOptions);\r\n","import styled from \"styled-components/macro\";\r\nexport const OriginalMapWrapper = styled.div`\r\n  display: flex;\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n`;\r\n\r\nexport const StreetViewWindow = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\n\r\nexport const OnlyStreetViewContainer = styled.div`\r\n  position: relative;\r\n  align-self: flex-end;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  /* overflow: hidden; */\r\n`;\r\n\r\nexport const StreetViewShade = styled.div`\r\n  position: absolute;\r\n  align-self: flex-end;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: 100;\r\n  border-color: rgba(0, 0, 0, 0.8);\r\n`;\r\n\r\nexport const InstructionItem = styled.div`\r\n  height: 450px;\r\n  padding: 0px 60px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 18px;\r\n  font-weight: bolder;\r\n  color: ${(props) => props.theme.primaryFont};\r\n  ${(props) => props.small && `font-size: 14px;`}\r\n  ${(props) => props.down && `padding-top: 40px;`}\r\n`;\r\n\r\nexport const UploadProgressContainer = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  display: flex;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 9999;\r\n  background-color: rgba(0, 0, 0, 0.8);\r\n`;\r\n","import React from \"react\";\r\nimport { InstructionItem } from \"./style\";\r\nimport { Modal } from \"antd\";\r\n\r\n// Import Swiper React components\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\n\r\n// Import Swiper styles\r\nimport \"swiper/swiper.min.css\";\r\nimport \"swiper/components/pagination/pagination.min.css\";\r\nimport \"swiper/components/navigation/navigation.min.css\";\r\n\r\n// import Swiper core and required modules\r\nimport SwiperCore, { Pagination, Navigation } from \"swiper/core\";\r\nimport {\r\n  firstText_1,\r\n  firstText_2,\r\n  secondSrc,\r\n  secondText,\r\n  thirdSrc,\r\n  thirdText,\r\n} from \"./text\";\r\n\r\n// install Swiper modules\r\nSwiperCore.use([Pagination, Navigation]);\r\n\r\nexport default function InstructionModal({ confirmModal, show, hideModal }) {\r\n  return (\r\n    <Modal\r\n      title=\"Instruction\"\r\n      visible={show}\r\n      maskClosable={false}\r\n      keyboard={false}\r\n      closable={false}\r\n      onOk={confirmModal}\r\n      onCancel={hideModal}\r\n      width={700}\r\n    >\r\n      <Swiper\r\n        pagination={{\r\n          type: \"progressbar\",\r\n        }}\r\n        navigation={true}\r\n        className=\"mySwiper\"\r\n      >\r\n        <SwiperSlide>\r\n          <InstructionItem>\r\n            <div>\r\n              <p>{firstText_1}</p>\r\n              <p>{firstText_2}</p>\r\n            </div>\r\n          </InstructionItem>\r\n        </SwiperSlide>\r\n        <SwiperSlide>\r\n          <InstructionItem>\r\n            <InstructionItem small down>\r\n              <div>\r\n                <p>{secondText}</p>\r\n                <img src={secondSrc} alt=\"secondSrc\" width=\"500\" />\r\n              </div>\r\n            </InstructionItem>\r\n          </InstructionItem>\r\n        </SwiperSlide>\r\n        <SwiperSlide>\r\n          <InstructionItem small down>\r\n            <div>\r\n              <p>{thirdText}</p>\r\n              <img src={thirdSrc} alt=\"thirdSrc\" width=\"500\" />\r\n            </div>\r\n          </InstructionItem>\r\n        </SwiperSlide>\r\n      </Swiper>\r\n    </Modal>\r\n  );\r\n}\r\n","export const firstText_1 =\r\n  \"In order to get the exact image of the current street view, we need you to share your current screen.\";\r\n\r\nexport const firstText_2 =\r\n  \"Don't worry, you don't need to do anything complicated. The only thing you need is to click the share entire screen button.  Please read through this tutorial carefully to get more info.\";\r\n\r\nexport const secondText = \"Select entire screen tab and follow the instruction\";\r\n\r\nexport const secondSrc =\r\n  \"https://cdn.jsdelivr.net/gh/FgSurewin/pictures/img20210804205803.png\";\r\n\r\nexport const thirdText = \"The final step is to click the share button\";\r\n\r\nexport const thirdSrc =\r\n  \"https://cdn.jsdelivr.net/gh/FgSurewin/pictures/img20210804205850.png\";\r\n","export function detectBrowser() {\r\n  if (\r\n    (navigator.userAgent.indexOf(\"Opera\") ||\r\n      navigator.userAgent.indexOf(\"OPR\")) !== -1\r\n  ) {\r\n    return \"Opera\";\r\n  } else if (navigator.userAgent.indexOf(\"Chrome\") !== -1) {\r\n    return \"Chrome\";\r\n  } else if (navigator.userAgent.indexOf(\"Safari\") !== -1) {\r\n    return \"Safari\";\r\n  } else if (navigator.userAgent.indexOf(\"Firefox\") !== -1) {\r\n    return \"Firefox\";\r\n  } else if (\r\n    navigator.userAgent.indexOf(\"MSIE\") !== -1 ||\r\n    !!document.documentMode === true\r\n  ) {\r\n    return \"IE\"; //crap\r\n  } else {\r\n    return \"Unknown\";\r\n  }\r\n}\r\n\r\nexport function stopCapture(videoElem) {\r\n  let tracks = videoElem.srcObject.getTracks();\r\n\r\n  tracks.forEach((track) => track.stop());\r\n  videoElem.srcObject = null;\r\n}\r\n\r\nexport async function startCapture(displayMediaOptions) {\r\n  let captureStream = null;\r\n\r\n  try {\r\n    captureStream = await navigator.mediaDevices.getDisplayMedia(\r\n      displayMediaOptions\r\n    );\r\n    console.log(\"CAPTURE...\");\r\n  } catch (err) {\r\n    console.error(\"Error: \" + err);\r\n    return err;\r\n  }\r\n  return captureStream;\r\n}\r\n\r\nexport function takeScreenShot(canvasElem, videoElem) {\r\n  canvasElem.width = videoElem.videoWidth;\r\n  canvasElem.height = videoElem.videoHeight;\r\n  const cutHeight = canvasElem.height * 0.085;\r\n  canvasElem\r\n    .getContext(\"2d\")\r\n    .drawImage(\r\n      videoElem,\r\n      0,\r\n      cutHeight,\r\n      canvasElem.width,\r\n      canvasElem.height - 2.25 * cutHeight,\r\n      0,\r\n      0,\r\n      canvasElem.width,\r\n      canvasElem.height\r\n    );\r\n  const imgSrc = canvasElem.toDataURL(\"image/webp\", 0.92);\r\n  stopCapture(videoElem);\r\n  return {\r\n    imgSrc,\r\n    imgSize: [canvasElem.width, canvasElem.height],\r\n  };\r\n}\r\n","import firebase from \"firebase/app\";\r\nimport \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESS,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nconst storage = firebase.storage();\r\n\r\nexport { storage, firebase as default };\r\n","import React from \"react\";\r\nimport styled from \"styled-components/macro\";\r\nimport { Modal } from \"antd\";\r\n\r\nconst PreviewModalContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nconst PreviewModalText = styled.strong`\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nexport default function PreviewModal({\r\n  imgSrc,\r\n  confirmModal,\r\n  show,\r\n  hideModal,\r\n  top = 0,\r\n}) {\r\n  return (\r\n    <Modal\r\n      title=\"Preview\"\r\n      visible={show}\r\n      maskClosable={false}\r\n      keyboard={false}\r\n      closable={false}\r\n      onOk={confirmModal}\r\n      onCancel={hideModal}\r\n      width={700}\r\n      okText=\"Correct\"\r\n      cancelText=\"No\"\r\n      style={{ top }}\r\n    >\r\n      <PreviewModalContainer>\r\n        <PreviewModalText>Is this the street view you want?</PreviewModalText>\r\n        {imgSrc && <img src={imgSrc} alt=\"Preview\" width=\"500\" />}\r\n      </PreviewModalContainer>\r\n    </Modal>\r\n  );\r\n}\r\n","export const FILL_STREET_VIEW_INFO = \"FILL_STREET_VIEW_INFO\";\r\nexport const FILL_STREET_VIEW_IMAGE = \"FILL_STREET_VIEW_IMAGE\";\r\nexport const FILL_STREET_VIEW_MARKERS = \"FILL_STREET_VIEW_MARKERS\";\r\nexport const FILL_STREET_VIEW_IMAGE_LIST = \"FILL_STREET_VIEW_IMAGE_LIST\";\r\nexport const FILL_STREET_VIEW_LOCATION = \"FILL_STREET_VIEW_LOCATION\";\r\nexport const FILL_STREET_VIEW_WITHOUT_IMAGE_LIST =\r\n  \"FILL_STREET_VIEW_WITHOUT_IMAGE_LIST\";\r\nexport const FILL_STREET_VIEW_ADD_IMAGE = \"FILL_STREET_VIEW_ADD_IMAGE\";\r\nexport const FILL_STREET_VIEW_CLEAR_MARKERS = \"FILL_STREET_VIEW_CLEAR_MARKERS\";\r\nexport const FILL_STREET_VIEW_IMAGE_COMPLETED =\r\n  \"FILL_STREET_VIEW_IMAGE_COMPLETED\";\r\nexport const FILL_STREET_VIEW_SELECT_IMAGE = \"FILL_STREET_VIEW_SELECT_IMAGE\";\r\n\r\nconst initialState = {\r\n  pano: null,\r\n  location: {\r\n    lat: 0,\r\n    lng: 0,\r\n  },\r\n  pov: {\r\n    heading: 0,\r\n    pitch: 0,\r\n    zoom: 1,\r\n  },\r\n  imgSize: [],\r\n  imgSrc: \"\",\r\n  images: [],\r\n  panoMarkers: [],\r\n  progress: 0,\r\n  selectImage: null,\r\n};\r\n\r\nfunction streetViewReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case FILL_STREET_VIEW_INFO:\r\n      const { pano, location, pov } = action.payload;\r\n      return {\r\n        ...state,\r\n        pano,\r\n        location,\r\n        pov,\r\n      };\r\n    case FILL_STREET_VIEW_IMAGE:\r\n      const { imgSize, imgSrc } = action.payload;\r\n      return {\r\n        ...state,\r\n        imgSize,\r\n        imgSrc,\r\n      };\r\n    case FILL_STREET_VIEW_MARKERS:\r\n      const newMarkers = action.payload;\r\n      return {\r\n        ...state,\r\n        panoMarkers: [...state.panoMarkers, ...newMarkers],\r\n      };\r\n\r\n    case FILL_STREET_VIEW_IMAGE_LIST:\r\n      const list = action.payload;\r\n      let finalStreetMarkerList = [];\r\n      const streetMarkerList = list.map((item) => item.panoMarkers);\r\n      streetMarkerList.forEach((item) => {\r\n        finalStreetMarkerList = finalStreetMarkerList.concat(item);\r\n      });\r\n      return {\r\n        ...state,\r\n        images: [...list].map((item) =>\r\n          Object.assign(item, { completed: false })\r\n        ),\r\n        panoMarkers: finalStreetMarkerList,\r\n      };\r\n\r\n    case FILL_STREET_VIEW_WITHOUT_IMAGE_LIST:\r\n      return {\r\n        ...state,\r\n        images: [],\r\n        panoMarkers: [],\r\n        selectImage: null,\r\n      };\r\n\r\n    case FILL_STREET_VIEW_ADD_IMAGE:\r\n      const addImage = action.payload;\r\n      return {\r\n        ...state,\r\n        images: [...state.images, addImage],\r\n        progress: (state.progress + 10) % 100,\r\n      };\r\n\r\n    case FILL_STREET_VIEW_LOCATION:\r\n      return {\r\n        ...state,\r\n        location: action.payload.location,\r\n        pano: action.payload.pano_id,\r\n      };\r\n\r\n    case FILL_STREET_VIEW_CLEAR_MARKERS:\r\n      return {\r\n        ...state,\r\n        panoMarkers: state.panoMarkers.filter(\r\n          (item) => item.image_id !== action.payload.image_id\r\n        ),\r\n      };\r\n\r\n    case FILL_STREET_VIEW_IMAGE_COMPLETED:\r\n      const id = action.payload;\r\n      return {\r\n        ...state,\r\n        progress: (state.progress + 10) % 100,\r\n        images: [...state.images].map((item) => {\r\n          if (item._id === id) item.completed = true;\r\n          return item;\r\n        }),\r\n      };\r\n\r\n    case FILL_STREET_VIEW_SELECT_IMAGE:\r\n      const currentImage = action.payload;\r\n      return {\r\n        ...state,\r\n        selectImage: currentImage,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default streetViewReducer;\r\n","import React from \"react\";\r\nimport asyncLoading from \"react-async-loader\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { combineStreetViewOptions } from \"./utils/streetViewTools\";\r\nimport {\r\n  OriginalMapWrapper,\r\n  StreetViewWindow,\r\n  OnlyStreetViewContainer,\r\n  StreetViewShade,\r\n  UploadProgressContainer,\r\n} from \"./style\";\r\nimport InstructionModal from \"./InstructionModal\";\r\nimport {\r\n  detectBrowser,\r\n  startCapture,\r\n  stopCapture,\r\n  takeScreenShot,\r\n} from \"./utils/screenshotHelper\";\r\nimport { message, Progress } from \"antd\";\r\nimport { storage } from \"../../firebase\";\r\nimport PreviewModal from \"./PreviewModal\";\r\nimport { FILL_STREET_VIEW_IMAGE } from \"../../redux/reducers/streetView\";\r\n\r\nconst StreetViewOnly = ({ mainStyle, googleMaps, streetViewOptions }) => {\r\n  const _streetView = React.useRef();\r\n  const [streetView, setStreetView] = React.useState(null);\r\n\r\n  /* ------------------------------ Upload Image ------------------------------ */\r\n  const [uploadProgress, setUploadProgress] = React.useState(null);\r\n\r\n  /* ---------------------------------- Redux --------------------------------- */\r\n  const { pov, pano } = useSelector((state) => state.streetView);\r\n  const dispatch = useDispatch();\r\n\r\n  /* --------------------------------- Router --------------------------------- */\r\n  const history = useHistory();\r\n\r\n  /* -------------------------- Setup for screenshot -------------------------- */\r\n  const videoRef = React.useRef(null);\r\n  const canvasRef = React.useRef(null);\r\n  const imgInfo = React.useRef(null);\r\n\r\n  /* ---------------------------- Instruction Modal --------------------------- */\r\n  const [show, setShow] = React.useState(false);\r\n  const hideModal = () => {\r\n    setShow(false);\r\n    history.push(\"/streetView\");\r\n  };\r\n  const confirmModal = () => {\r\n    capture();\r\n  };\r\n  async function capture() {\r\n    setShow(false);\r\n    try {\r\n      const isChrome = detectBrowser();\r\n      if (isChrome) {\r\n        videoRef.current.srcObject = await startCapture();\r\n        const videoTrack = videoRef.current.srcObject.getVideoTracks()[0];\r\n        const videoSetting = videoTrack.getSettings();\r\n        if (videoSetting.displaySurface === \"monitor\") {\r\n          setTimeout(() => {\r\n            imgInfo.current = takeScreenShot(\r\n              canvasRef.current,\r\n              videoRef.current\r\n            );\r\n            setShowPreview(true);\r\n          }, 500);\r\n        } else {\r\n          stopCapture(videoRef.current);\r\n          message.error(\"Please share the entire screen!\");\r\n          history.push(\"/streetView\");\r\n        }\r\n      } else {\r\n        message.error(\"Please use Chrome to enable the capture function!\");\r\n        history.push(\"/streetView\");\r\n      }\r\n    } catch (err) {\r\n      history.push(\"/streetView\");\r\n    }\r\n  }\r\n  /* ------------------------------ Preview Modal ----------------------------- */\r\n  const [showPreview, setShowPreview] = React.useState(false);\r\n  const hidePreviewModal = () => {\r\n    setShowPreview(false);\r\n    history.push(\"/streetView\");\r\n  };\r\n  const confirmPreviewModal = () => {\r\n    setShowPreview(false);\r\n    if (imgInfo.current) {\r\n      handleUploadImage(imgInfo.current.imgSrc);\r\n    }\r\n  };\r\n\r\n  function handleUploadImage(imgSrc) {\r\n    // Upload file and metadata to the object 'images/mountains.jpg'\r\n    var uploadTask = storage\r\n      .ref(`${pano}/h_${pov.heading}_p_${pov.pitch}`)\r\n      .putString(imgSrc, \"data_url\");\r\n\r\n    // Listen for state changes, errors, and completion of the upload.\r\n    uploadTask.on(\r\n      \"state_changed\", // or 'firebase.storage.TaskEvent.STATE_CHANGED'\r\n      (snapshot) => {\r\n        const currentProgress =\r\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n        setUploadProgress(currentProgress);\r\n      },\r\n      (error) => {\r\n        console.log(error);\r\n      },\r\n      () => {\r\n        // Upload completed successfully, now we can get the download URL\r\n        uploadTask.snapshot.ref.getDownloadURL().then((url) => {\r\n          if (imgInfo.current) {\r\n            dispatch({\r\n              type: FILL_STREET_VIEW_IMAGE,\r\n              payload: { imgSize: imgInfo.current.imgSize, imgSrc: url },\r\n            });\r\n          }\r\n          message.success(\"Upload successfully\");\r\n          history.push(\"/captureLabelPage\");\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    // First initialization\r\n    if (streetView === null && googleMaps) {\r\n      setStreetView(\r\n        new googleMaps.StreetViewPanorama(\r\n          _streetView.current,\r\n          combineStreetViewOptions(streetViewOptions)\r\n        )\r\n      );\r\n    }\r\n\r\n    if (streetView !== null && googleMaps) {\r\n      setShow(true);\r\n    }\r\n\r\n    return () => {\r\n      if (streetView) {\r\n        googleMaps.event.clearInstanceListeners(streetView);\r\n      }\r\n    };\r\n  }, [streetView, googleMaps, streetViewOptions]);\r\n\r\n  return (\r\n    <>\r\n      <OriginalMapWrapper id=\"StreetView\">\r\n        <OnlyStreetViewContainer style={mainStyle}>\r\n          <StreetViewShade />\r\n          <StreetViewWindow id=\"streetView\" ref={_streetView} />\r\n        </OnlyStreetViewContainer>\r\n      </OriginalMapWrapper>\r\n      <video\r\n        ref={videoRef}\r\n        autoPlay\r\n        style={{\r\n          display: \"none\",\r\n        }}\r\n      ></video>\r\n      <canvas ref={canvasRef} id=\"canvas\" style={{ display: \"none\" }}></canvas>\r\n      <InstructionModal\r\n        show={show}\r\n        confirmModal={confirmModal}\r\n        hideModal={hideModal}\r\n      />\r\n      <PreviewModal\r\n        show={showPreview}\r\n        confirmModal={confirmPreviewModal}\r\n        hideModal={hidePreviewModal}\r\n        imgSrc={imgInfo.current && imgInfo.current.imgSrc}\r\n      />\r\n      {uploadProgress && (\r\n        <UploadProgressContainer>\r\n          <Progress type=\"circle\" percent={uploadProgress} />\r\n        </UploadProgressContainer>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapScriptsToProps = ({ api }) => ({\r\n  googleMaps: {\r\n    globalPath: \"google.maps\",\r\n    url: `https://maps.googleapis.com/maps/api/js?key=${api}&v=weekly`,\r\n    jsonp: true,\r\n  },\r\n});\r\n\r\nexport default asyncLoading(mapScriptsToProps)(StreetViewOnly);\r\n","export function generateStreetOption(lat, lng, heading = 230, pitch = 0) {\r\n  return {\r\n    position: {\r\n      lat,\r\n      lng,\r\n    },\r\n    pov: {\r\n      heading,\r\n      pitch,\r\n    },\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport StreetViewOnly from \"../../components/StreetViewOnly\";\r\nimport { generateStreetOption } from \"./utils\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function CapturePage() {\r\n  // Redux\r\n  const { location, pov, pano } = useSelector((state) => state.streetView);\r\n  // Router\r\n  const history = useHistory();\r\n\r\n  // Prevent user refresh the page\r\n  if (pano === null) {\r\n    history.push(\"/streetView\");\r\n    return <div>Wrong Page</div>;\r\n  }\r\n  return (\r\n    <div>\r\n      <StreetViewOnly\r\n        api={process.env.REACT_APP_API_KEY}\r\n        streetViewOptions={generateStreetOption(\r\n          location.lat,\r\n          location.lng,\r\n          pov.heading,\r\n          pov.pitch\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","function get3dFov(zoom) {\r\n  return zoom <= 2\r\n    ? 126.5 - zoom * 36.75 // linear descent\r\n    : 195.93 / Math.pow(1.92, zoom); // parameters determined experimentally\r\n}\r\nfunction sgn(x) {\r\n  return x >= 0 ? 1 : -1;\r\n}\r\nexport function calculatePointPov(canvasX, canvasY, pov) {\r\n  var heading = parseInt(pov.heading, 10),\r\n    pitch = parseInt(pov.pitch, 10),\r\n    zoom = parseInt(pov.zoom, 10);\r\n\r\n  var PI = Math.PI;\r\n  var cos = Math.cos;\r\n  var sin = Math.sin;\r\n  var tan = Math.tan;\r\n  var sqrt = Math.sqrt;\r\n  var atan2 = Math.atan2;\r\n  var asin = Math.asin;\r\n\r\n  var fov = (get3dFov(zoom) * PI) / 180.0;\r\n  var width = 640;\r\n  var height = 640;\r\n\r\n  var h0 = (heading * PI) / 180.0;\r\n  var p0 = (pitch * PI) / 180.0;\r\n\r\n  var f = (0.5 * width) / tan(0.5 * fov);\r\n\r\n  var x0 = f * cos(p0) * sin(h0);\r\n  var y0 = f * cos(p0) * cos(h0);\r\n  var z0 = f * sin(p0);\r\n\r\n  var du = canvasX - width / 2;\r\n  var dv = height / 2 - canvasY;\r\n\r\n  var ux = sgn(cos(p0)) * cos(h0);\r\n  var uy = -sgn(cos(p0)) * sin(h0);\r\n  var uz = 0;\r\n\r\n  var vx = -sin(p0) * sin(h0);\r\n  var vy = -sin(p0) * cos(h0);\r\n  var vz = cos(p0);\r\n\r\n  var x = x0 + du * ux + dv * vx;\r\n  var y = y0 + du * uy + dv * vy;\r\n  var z = z0 + du * uz + dv * vz;\r\n\r\n  var R = sqrt(x * x + y * y + z * z);\r\n  var h = atan2(x, y);\r\n  var p = asin(z / R);\r\n\r\n  return {\r\n    heading: (h * 180.0) / PI,\r\n    pitch: (p * 180.0) / PI,\r\n    zoom: zoom,\r\n  };\r\n}\r\n","import { v4 as uuidv4 } from \"uuid\";\r\nimport { calculatePointPov } from \"./math\";\r\nexport const typeConfig = [\r\n  {\r\n    type: \"door\",\r\n    color: \"#F97F51\",\r\n    subtype: [\"Single\", \"Double\", \"Automatic\", \"Revolving\", \"Open\"],\r\n  },\r\n\r\n  {\r\n    type: \"knob\",\r\n    color: \"#9AECDB\",\r\n    subtype: [\"vBar\", \"Pull\", \"Round\", \"hBar\"],\r\n  },\r\n\r\n  {\r\n    type: \"ramp\",\r\n    color: \"#EAB543\",\r\n  },\r\n\r\n  {\r\n    type: \"stairs\",\r\n    color: \"#D6A2E8\",\r\n  },\r\n];\r\nconst WIDTH = 800;\r\nconst HEIGHT = 600;\r\n\r\n/* ----------------------------- Database Format ---------------------------- */\r\n\r\nconst parseLabel = (label, image_size) => {\r\n  const x = (label.box.left * WIDTH) / image_size[0];\r\n  const y = (label.box.top * HEIGHT) / image_size[1];\r\n  const width = (label.box.width * WIDTH) / image_size[0];\r\n  const height = (label.box.height * HEIGHT) / image_size[1];\r\n  const subtype = label.subtype ? label.subtype : undefined;\r\n  return {\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    type: label.label,\r\n    id: label.label_id,\r\n    subtype,\r\n  };\r\n};\r\n\r\nexport const labelsDecorator = (list, image_size) => {\r\n  return list.map((item) => parseLabel(item, image_size));\r\n};\r\n\r\nconst reverseLabel = (item, image_size) => {\r\n  const left = (item.x * image_size[0]) / WIDTH;\r\n  const top = (item.y * image_size[1]) / HEIGHT;\r\n  const width = (item.width * image_size[0]) / WIDTH;\r\n  const height = (item.height * image_size[1]) / HEIGHT;\r\n  const subtype = item.subtype ? item.subtype : null;\r\n  return {\r\n    box: {\r\n      left,\r\n      top,\r\n      width,\r\n      height,\r\n    },\r\n    label_id: item.id,\r\n    subtype,\r\n    label: item.type,\r\n  };\r\n};\r\n\r\nexport const labelsReverser = (list, image_size = [3584, 2560]) => {\r\n  return list.map((item) => reverseLabel(item, image_size));\r\n};\r\n\r\nexport function generateImage({\r\n  image_id,\r\n  pano,\r\n  location,\r\n  imgSrc,\r\n  imgSize,\r\n  pov,\r\n  labeled_area,\r\n  panoMarkers,\r\n}) {\r\n  return {\r\n    image_id,\r\n    pano,\r\n    lat: location.lat,\r\n    lon: location.lng,\r\n    url: imgSrc,\r\n    image_size: imgSize,\r\n    isLabeled: false,\r\n    count: 0,\r\n    labeled_area,\r\n    panoMarkers,\r\n    pov,\r\n  };\r\n}\r\n\r\n/**\r\n * id:string,\r\n * pov:{heading, pitch},\r\n * title:string,\r\n * point:[number, number]\r\n */\r\n\r\n/* -------------------------- Generate PanoMarkers -------------------------- */\r\nfunction sizeConvert(label, labelImageSize, targetSize) {\r\n  const { x, y } = label;\r\n  const trueX = (x * targetSize[0]) / labelImageSize[0];\r\n  const trueY = (y * targetSize[1]) / labelImageSize[1];\r\n  return {\r\n    x: trueX,\r\n    y: trueY,\r\n  };\r\n}\r\n\r\nexport function generatePanoMarkersAtCenter(labels, pov, image_id, nickname) {\r\n  return labels.map((item) => {\r\n    const targetX = item.x + item.width / 2;\r\n    const targetY = item.y + item.height / 2;\r\n    const result = sizeConvert(\r\n      { x: targetX, y: targetY },\r\n      [800, 600],\r\n      [640, 640]\r\n    );\r\n    const newPov = calculatePointPov(result.x, result.y, pov);\r\n    return {\r\n      id: uuidv4(),\r\n      pov: newPov,\r\n      title: item.type,\r\n      subtype: item.subtype ? item.subtype : null,\r\n      point: [0, 0],\r\n      image_id,\r\n      nickname,\r\n    };\r\n  });\r\n}\r\n\r\nexport function generatePanoMarkers(labels, pov, image_id) {\r\n  const streetViewMarkerCreator = new StreetViewMarkerCreator(\r\n    [640, 640],\r\n    [800, 600]\r\n  );\r\n  return labels.map((item) => {\r\n    const [first, second] = streetViewMarkerCreator.generatePoint({\r\n      // x: item.x + (item.width / 2) * 0.5,\r\n      // y: item.y + (item.height / 2) * 0.3,\r\n      x: item.x,\r\n      y: item.y,\r\n    });\r\n    return {\r\n      id: uuidv4(),\r\n      pov,\r\n      title: item.type,\r\n      point: [first, second],\r\n      image_id,\r\n    };\r\n  });\r\n}\r\n\r\nconst NW = \"NW\";\r\nconst NE = \"NE\";\r\nconst SW = \"SW\";\r\nconst SE = \"SE\";\r\n\r\nexport class StreetViewMarkerCreator {\r\n  // base: [number, number]\r\n  constructor(base, labelImageSize) {\r\n    this.base = base;\r\n    this.labelImageSize = labelImageSize;\r\n    this.zeroPoint = [base[0] / 2, base[1] / 2];\r\n  }\r\n\r\n  findRegion = (labelOrigin) => {\r\n    const { x, y } = labelOrigin;\r\n    let result = NW;\r\n    if (x - this.zeroPoint[0] <= 0 && y - this.zeroPoint[1] <= 0) {\r\n      result = NW;\r\n    } else if (x - this.zeroPoint[0] > 0 && y - this.zeroPoint[1] <= 0) {\r\n      result = NE;\r\n    } else if (x - this.zeroPoint[0] <= 0 && y - this.zeroPoint[1] > 0) {\r\n      result = SW;\r\n    } else if (x - this.zeroPoint[0] > 0 && y - this.zeroPoint[1] > 0) {\r\n      result = SE;\r\n    }\r\n    return result;\r\n  };\r\n\r\n  convertSize = (labelOrigin) => {\r\n    const { x, y } = labelOrigin;\r\n    const trueX = (x * this.base[0]) / this.labelImageSize[0];\r\n    const trueY = (y * this.base[1]) / this.labelImageSize[1];\r\n    return {\r\n      x: trueX,\r\n      y: trueY,\r\n    };\r\n  };\r\n\r\n  generatePoint = (labelOrigin) => {\r\n    const { x, y } = this.convertSize(labelOrigin);\r\n    const region = this.findRegion(labelOrigin);\r\n    let first = 0;\r\n    let second = 0;\r\n    switch (region) {\r\n      case NW:\r\n        first = Math.abs(x - this.zeroPoint[0]);\r\n        second = Math.abs(y - this.zeroPoint[1]);\r\n        break;\r\n      case NE:\r\n        first = -1 * (x - this.zeroPoint[0]);\r\n        second = Math.abs(y - this.zeroPoint[1]);\r\n        break;\r\n      case SW:\r\n        first = Math.abs(x - this.zeroPoint[0]);\r\n        second = -1 * (y - this.zeroPoint[1]);\r\n        break;\r\n      case SE:\r\n        first = -1 * (x - this.zeroPoint[0]);\r\n        second = -1 * (y - this.zeroPoint[1]);\r\n        break;\r\n      default:\r\n        return [first, second];\r\n    }\r\n    return [first, second];\r\n  };\r\n}\r\n","import { myService } from \".\";\r\n\r\nexport const createImage = (data) =>\r\n  myService.request({\r\n    method: \"POST\",\r\n    url: `/collectImage/createImage`,\r\n    data,\r\n  });\r\n\r\nexport const fetchStreetViewImagesByPano = (id) =>\r\n  myService.request({\r\n    method: \"GET\",\r\n    url: `/collectImage/getImagesByPano/${id}`,\r\n  });\r\n\r\nexport const fetchStreetViewToggle = (data) =>\r\n  myService.request({\r\n    method: \"POST\",\r\n    url: `/collectImage/toggle`,\r\n    data,\r\n  });\r\n\r\nexport const fetchStreetViewImageById = (id) =>\r\n  myService.request({\r\n    method: \"GET\",\r\n    url: `/collectImage/getOneById/${id}`,\r\n  });\r\n\r\nexport const addStreetViewLabeledArea = (data) =>\r\n  myService.request({\r\n    method: \"POST\",\r\n    url: `/collectImage/addLabelArea`,\r\n    data,\r\n  });\r\nexport const addStreetViewMarkers = (data) =>\r\n  myService.request({\r\n    method: \"POST\",\r\n    url: `/collectImage/addMarkers`,\r\n    data,\r\n  });\r\n","import React from \"react\";\r\nimport Logo from \"../../images/SmallLogo.svg\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { ReactLabelTool } from \"@fgsurewin/react_labeltool\";\r\nimport {\r\n  generateImage,\r\n  generatePanoMarkersAtCenter,\r\n  typeConfig,\r\n  labelsReverser,\r\n} from \"./utils\";\r\nimport {\r\n  FILL_STREET_VIEW_ADD_IMAGE,\r\n  FILL_STREET_VIEW_MARKERS,\r\n} from \"../../redux/reducers/streetView\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { createImage } from \"../../api/collectImage\";\r\n\r\nexport default function CaptureLabelPage() {\r\n  /* ---------------------------------- Redux --------------------------------- */\r\n  const { imgSrc, pov, pano, location, imgSize } = useSelector(\r\n    (state) => state.streetView\r\n  );\r\n  const { nickname } = useSelector((state) => state.user);\r\n  const dispatch = useDispatch();\r\n\r\n  /* --------------------------------- Router --------------------------------- */\r\n  const history = useHistory();\r\n\r\n  const onSubmit = async (value) => {\r\n    const image_id = uuidv4();\r\n    const panoMarkers = generatePanoMarkersAtCenter(\r\n      value,\r\n      pov,\r\n      image_id,\r\n      nickname\r\n    );\r\n    const newImage = generateImage({\r\n      image_id,\r\n      pano,\r\n      location,\r\n      imgSize,\r\n      pov,\r\n      imgSrc,\r\n      panoMarkers,\r\n      labeled_area: labelsReverser(value, imgSize),\r\n    });\r\n    await createImage(newImage);\r\n    dispatch({\r\n      type: FILL_STREET_VIEW_MARKERS,\r\n      payload: panoMarkers,\r\n    });\r\n    dispatch({\r\n      type: FILL_STREET_VIEW_ADD_IMAGE,\r\n      payload: { ...newImage, completed: true },\r\n    });\r\n    history.push(\"streetView\");\r\n  };\r\n  const onCancel = (value) => {\r\n    history.push(\"streetView\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {imgSrc && (\r\n        <ReactLabelTool\r\n          Logo={Logo}\r\n          typeConfig={typeConfig}\r\n          labels={[]}\r\n          imgUrl={imgSrc}\r\n          handleSubmit={onSubmit}\r\n          handleBack={onCancel}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// import \"./style.scss\";\r\n\r\nconst Label = ({ labelStyle }) => {\r\n  return <div className=\"label\" style={labelStyle}></div>;\r\n};\r\n\r\nexport default Label;\r\n","export const defaultMapOptions = {\r\n\tmapTypeControlOptions: {\r\n\t\tmapTypeIds: [],\r\n\t},\r\n\tzoomControl: false,\r\n\tgestureHandling: \"none\",\r\n\tfullscreenControl: false,\r\n\tpanControl: true,\r\n\t// streetViewControl: false,\r\n\t// disableDefaultUI: true,\r\n};\r\n\r\nexport const combineMapOptions = (options) =>\r\n\tObject.assign({}, options, defaultMapOptions);\r\n","export function bindStreetViewEvents(street, events, map) {\r\n  street.addListener(\"pano_changed\", () => {\r\n    if (events.onPanoChanged) {\r\n      const result = generateInfo(\r\n        street.getPano(),\r\n        street.getPosition(),\r\n        street.getPov()\r\n      );\r\n      events.onPanoChanged(result, map);\r\n    }\r\n  });\r\n\r\n  street.addListener(\"position_changed\", () => {\r\n    // console.log(\"Origin -> \", street.getPano());\r\n    if (events.onPositionChanged) {\r\n      const result = generateInfo(\r\n        street.getPano(),\r\n        street.getPosition(),\r\n        street.getPov()\r\n      );\r\n      events.onPositionChanged(result, map);\r\n    }\r\n  });\r\n\r\n  street.addListener(\"pov_changed\", () => {\r\n    if (events.onPovChanged) {\r\n      const result = generateInfo(\r\n        street.getPano(),\r\n        street.getPosition(),\r\n        street.getPov()\r\n      );\r\n      events.onPovChanged(result, map);\r\n    }\r\n  });\r\n\r\n  street.addListener(\"visible_changed\", () => {\r\n    if (events.onVisibleChanged) {\r\n      const result = generateInfo(\r\n        street.getPano(),\r\n        street.getPosition(),\r\n        street.getPov()\r\n      );\r\n      events.onVisibleChanged(result, map);\r\n    }\r\n  });\r\n\r\n  street.addListener(\"zoom_changed\", () => {\r\n    if (events.onZoomChanged) {\r\n      const result = generateInfo(\r\n        street.getPano(),\r\n        street.getPosition(),\r\n        street.getPov()\r\n      );\r\n      events.onZoomChanged(result, street);\r\n    }\r\n  });\r\n}\r\n\r\nexport const defaultStreetViewOptions = {\r\n  scrollwheel: false,\r\n  fullscreenControl: false,\r\n  panControl: false,\r\n  linksControl: true,\r\n  disableDefaultUI: true,\r\n  zoomControl: true,\r\n  clickToGo: false,\r\n};\r\n\r\nexport const combineStreetViewOptions = (options) =>\r\n  Object.assign({}, options, defaultStreetViewOptions);\r\n\r\nfunction generateInfo(pano, positionClass, pov) {\r\n  const position = {\r\n    lat: positionClass.lat(),\r\n    lng: positionClass.lng(),\r\n  };\r\n  return {\r\n    pano,\r\n    pov,\r\n    position,\r\n  };\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const OriginalMapWrapper = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nexport const MapContainer = styled.div`\r\n  position: relative;\r\n  align-self: flex-end;\r\n  width: 200px;\r\n  height: 200px;\r\n`;\r\n\r\nexport const Shade = styled.div`\r\n  position: absolute;\r\n  z-index: 10;\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\n\r\nexport const SmallMap = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\n\r\nexport const StreetViewContainer = styled.div`\r\n  position: relative;\r\n  align-self: flex-end;\r\n  /* width: 720px;\r\n  height: 480px; */\r\n  width: 640px;\r\n  height: 640px;\r\n  overflow: hidden;\r\n`;\r\n\r\nexport const StreetViewWindow = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\n\r\nexport const LabelPanel = styled.div`\r\n  z-index: 5;\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n`;\r\n\r\nconst getColor = (type) => {\r\n  let result = \"\";\r\n  switch (type) {\r\n    case \"door\":\r\n      result = \"#F97F51\";\r\n      break;\r\n    case \"knob\":\r\n      result = \"#9AECDB\";\r\n      break;\r\n    case \"ramp\":\r\n      result = \"#EAB543\";\r\n      break;\r\n    case \"stairs\":\r\n      result = \"#D6A2E8\";\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const SingleMarkerInnerWrapper = styled.section`\r\n  background-color: ${(props) => getColor(props.targetType)};\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 50%;\r\n`;\r\nexport const SingleMarkerInnerContainer = styled.div`\r\n  position: relative;\r\n  top: -570%;\r\n  left: -300%;\r\n  background-color: white;\r\n  width: 150px;\r\n  height: 100px;\r\n  border-radius: 4px;\r\n  padding: 10px;\r\n`;\r\nexport const SingleMarkerInnerText = styled.p`\r\n  /* font-weight: bolder; */\r\n  font-size: 14px;\r\n`;\r\n","import { Component } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { createOverlayElement } from \"./utils/createCustomElement\";\r\nimport { MarkerCreator } from \"./utils/MarkerCreator\";\r\n\r\nexport default class SingleMarker extends Component {\r\n  /** Overlay instance. */\r\n  overlay = null;\r\n\r\n  /** Dom element reference to the content rendered in the overlay. */\r\n  el = null;\r\n\r\n  componentWillUnmount() {\r\n    /** remove overlay from the map. */\r\n    // this.overlay.onRemove();\r\n    // delete this.overlay;\r\n  }\r\n\r\n  render() {\r\n    try {\r\n      const {\r\n        googleMaps,\r\n        children,\r\n        container,\r\n        position,\r\n        pano,\r\n        anchor,\r\n        size,\r\n        title,\r\n        id,\r\n        clickFunc,\r\n      } = this.props;\r\n      this.el = this.el || createOverlayElement();\r\n      const PanoMarker = MarkerCreator(googleMaps);\r\n      this.overlay =\r\n        this.overlay ||\r\n        new PanoMarker({\r\n          content: this.el,\r\n          container,\r\n          position,\r\n          pano,\r\n          anchor,\r\n          size,\r\n          title,\r\n          id,\r\n          clickFunc,\r\n        });\r\n\r\n      if (!googleMaps) return null;\r\n      return ReactDOM.createPortal(children, this.el);\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n}\r\n","export function createOverlayElement() {\r\n  const el = document.createElement(\"div\");\r\n  el.style.position = \"absolute\";\r\n  el.style.cursor = \"pointer\";\r\n  return el;\r\n}\r\n","export function MarkerCreator(googleMaps) {\r\n  return class extends googleMaps.OverlayView {\r\n    constructor(opts) {\r\n      super(opts);\r\n      this.container_ = opts.container;\r\n\r\n      this.povToPixel_ = !!window.chrome\r\n        ? this.povToPixel3d\r\n        : this.povToPixel2d;\r\n\r\n      this.anchor_ = opts.anchor || new googleMaps.Point(16, 16);\r\n\r\n      this.className_ = opts.className || null;\r\n\r\n      this.clickable_ = opts.clickable || true;\r\n\r\n      this.icon_ = opts.icon || null;\r\n\r\n      this.id_ = opts.id || null;\r\n\r\n      //! Important\r\n      /* --------------------------------- My Code -------------------------------- */\r\n      this.marker_ = opts.content;\r\n      // It used to restrict the onAdd function\r\n      this.first_ = true;\r\n      this.isClick_ = false;\r\n      this.clickFunc_ = opts.clickFunc;\r\n      /* --------------------------------- My Code -------------------------------- */\r\n\r\n      this.pano_ = null;\r\n\r\n      this.pollId_ = -1;\r\n\r\n      this.position_ = opts.position || { heading: 0, pitch: 0 };\r\n\r\n      this.povListener_ = null;\r\n\r\n      this.zoomListener_ = null;\r\n\r\n      this.size_ = opts.size || new googleMaps.Size(32, 32);\r\n\r\n      this.title_ = opts.title || \"\";\r\n\r\n      this.visible_ = typeof opts.visible === \"boolean\" ? opts.visible : true;\r\n\r\n      this.zIndex_ = opts.zIndex || 1;\r\n\r\n      this.setPano(opts.pano || null, opts.container);\r\n    }\r\n\r\n    onAdd = () => {\r\n      if (!this.first_) {\r\n        // Sometimes the maps API does trigger onAdd correctly. We have to prevent\r\n        // duplicate execution of the following code by checking if the marker node\r\n        // has already been created.\r\n        return;\r\n      }\r\n      this.first_ = false;\r\n\r\n      // Basic style attributes for every marker\r\n      this.marker_.style.width = this.size_.width + \"px\";\r\n      this.marker_.style.height = this.size_.height + \"px\";\r\n      this.marker_.style.display = this.visible_ ? \"block\" : \"none\";\r\n      this.marker_.style.zIndex = this.zIndex_;\r\n\r\n      // Set other css attributes based on the given parameters\r\n      if (this.id_) {\r\n        this.marker_.id = this.id_;\r\n      }\r\n      if (this.className_) {\r\n        this.marker_.className = this.className_;\r\n      }\r\n      if (this.title_) {\r\n        this.marker_.title = this.title_;\r\n      }\r\n      if (this.icon_) {\r\n        this.marker_.style.backgroundImage = \"url(\" + this.icon_ + \")\";\r\n      }\r\n\r\n      // If neither icon, class nor id is specified, assign the basic google maps\r\n      // marker image to the marker (otherwise it will be invisble)\r\n      //   if (!(this.id_ || this.className_ || this.icon_)) {\r\n      //     this.marker_.style.backgroundImage =\r\n      //       \"url(https://www.google.com/intl/en_us/\" +\r\n      //       \"mapfiles/ms/micons/red-dot.png)\";\r\n      //   }\r\n\r\n      this.getPanes().overlayMouseTarget.appendChild(this.marker_);\r\n\r\n      // Attach to some global events\r\n      window.addEventListener(\"resize\", this.draw.bind(this));\r\n      this.povListener_ = googleMaps.event.addListener(\r\n        this.getMap(),\r\n        \"pov_changed\",\r\n        this.draw.bind(this)\r\n      );\r\n      this.zoomListener_ = googleMaps.event.addListener(\r\n        this.getMap(),\r\n        \"zoom_changed\",\r\n        this.draw.bind(this)\r\n      );\r\n\r\n      var eventName = \"click\";\r\n\r\n      // Make clicks possible\r\n      if (window.PointerEvent) {\r\n        eventName = \"pointerdown\";\r\n      } else if (window.MSPointerEvent) {\r\n        eventName = \"MSPointerDown\";\r\n      }\r\n\r\n      this.marker_.addEventListener(eventName, this.onClick.bind(this), false);\r\n\r\n      this.draw();\r\n\r\n      // Fire 'add' event once the marker has been created.\r\n      googleMaps.event.trigger(this, \"add\", this.marker_);\r\n    };\r\n\r\n    draw = () => {\r\n      if (!this.pano_) {\r\n        return;\r\n      }\r\n      var offset = this.povToPixel_(\r\n        this.position_,\r\n        this.pano_.getPov(),\r\n        typeof this.pano_.getZoom() !== \"undefined\" ? this.pano_.getZoom() : 1,\r\n        this.container_\r\n      );\r\n\r\n      if (offset !== null) {\r\n        this.marker_.style.left = offset.left - this.anchor_.x + \"px\";\r\n        this.marker_.style.top = offset.top - this.anchor_.y + \"px\";\r\n      } else {\r\n        // If offset is null, the marker is \"behind\" the camera,\r\n        // therefore we position the marker outside of the viewport\r\n        this.marker_.style.left = -(9999 + this.size_.width) + \"px\";\r\n        this.marker_.style.top = \"0\";\r\n      }\r\n\r\n      // Determine whether to display the content menu\r\n      if (this.marker_.children[0] && this.marker_.children[0].children[0]) {\r\n        this.marker_.children[0].children[0].style.display = this.isClick_\r\n          ? \"block\"\r\n          : \"none\";\r\n      }\r\n    };\r\n\r\n    onClick = (event) => {\r\n      if (this.clickable_) {\r\n        googleMaps.event.trigger(this, \"click\");\r\n      }\r\n\r\n      // don't let the event bubble up\r\n      event.cancelBubble = true;\r\n      if (event.stopPropagation) {\r\n        event.stopPropagation();\r\n      }\r\n      // Determine whether to display the content menu\r\n      this.isClick_ = !this.isClick_;\r\n      if (this.marker_.children[0] && this.marker_.children[0].children[0]) {\r\n        this.marker_.children[0].children[0].style.display = this.isClick_\r\n          ? \"block\"\r\n          : \"none\";\r\n      }\r\n      this.clickFunc_();\r\n    };\r\n\r\n    onRemove = () => {\r\n      if (!this.marker_) {\r\n        // Similar to onAdd, we have to prevent duplicate onRemoves as well.\r\n        return;\r\n      }\r\n\r\n      googleMaps.event.removeListener(this.povListener_);\r\n      googleMaps.event.removeListener(this.zoomListener_);\r\n      this.marker_.parentNode.removeChild(this.marker_);\r\n      this.marker_ = null;\r\n\r\n      // Fire 'remove' event once the marker has been destroyed.\r\n      googleMaps.event.trigger(this, \"remove\");\r\n    };\r\n\r\n    setPano = (pano, container) => {\r\n      // In contrast to regular OverlayViews, we are disallowing the usage on\r\n      // regular maps\r\n      if (!!pano && !(pano instanceof googleMaps.StreetViewPanorama)) {\r\n        // throw \"PanoMarker only works inside a StreetViewPanorama.\";\r\n        return;\r\n      }\r\n\r\n      // Remove the marker if it previously was on a panorama\r\n      if (!!this.pano_) {\r\n        this.onRemove();\r\n      }\r\n\r\n      // Call method from superclass\r\n      this.setMap(pano);\r\n      this.pano_ = pano;\r\n      this.container_ = container;\r\n\r\n      // Fire the onAdd Event manually as soon as the pano is ready\r\n      if (!!pano) {\r\n        var promiseFn = function (resolve) {\r\n          // Poll for panes to become available\r\n          var pollCallback = function () {\r\n            if (!!this.getPanes()) {\r\n              window.clearInterval(this.pollId_);\r\n              this.onAdd();\r\n              if (resolve) {\r\n                resolve(this);\r\n              }\r\n            }\r\n          };\r\n\r\n          this.pollId_ = window.setInterval(pollCallback.bind(this), 10);\r\n        };\r\n\r\n        // Best case, the promiseFn can be wrapped in a Promise so the consumer knows when the pano is set\r\n        // Otherwise just call the function immediately\r\n        if (typeof Promise !== \"undefined\") {\r\n          return new Promise(promiseFn.bind(this));\r\n        } else {\r\n          promiseFn.call(this);\r\n        }\r\n      }\r\n    };\r\n\r\n    get3dFov = (zoom) => {\r\n      return zoom <= 2\r\n        ? 126.5 - zoom * 36.75 // linear descent\r\n        : 195.93 / Math.pow(1.92, zoom); // parameters determined experimentally\r\n    };\r\n\r\n    povToPixel3d = (targetPov, currentPov, zoom, viewport) => {\r\n      // Gather required variables and convert to radians where necessary\r\n      var width = viewport.offsetWidth;\r\n      var height = viewport.offsetHeight;\r\n      var target = {\r\n        left: width / 2,\r\n        top: height / 2,\r\n      };\r\n\r\n      var DEG_TO_RAD = Math.PI / 180.0;\r\n      var fov = this.get3dFov(zoom) * DEG_TO_RAD;\r\n      var h0 = currentPov.heading * DEG_TO_RAD;\r\n      var p0 = currentPov.pitch * DEG_TO_RAD;\r\n      var h = targetPov.heading * DEG_TO_RAD;\r\n      var p = targetPov.pitch * DEG_TO_RAD;\r\n\r\n      // f = focal length = distance of current POV to image plane\r\n      var f = width / 2 / Math.tan(fov / 2);\r\n\r\n      // our coordinate system: camera at (0,0,0), heading = pitch = 0 at (0,f,0)\r\n      // calculate 3d coordinates of viewport center and target\r\n      var cos_p = Math.cos(p);\r\n      var sin_p = Math.sin(p);\r\n\r\n      var cos_h = Math.cos(h);\r\n      var sin_h = Math.sin(h);\r\n\r\n      var x = f * cos_p * sin_h;\r\n      var y = f * cos_p * cos_h;\r\n      var z = f * sin_p;\r\n\r\n      var cos_p0 = Math.cos(p0);\r\n      var sin_p0 = Math.sin(p0);\r\n\r\n      var cos_h0 = Math.cos(h0);\r\n      var sin_h0 = Math.sin(h0);\r\n\r\n      var x0 = f * cos_p0 * sin_h0;\r\n      var y0 = f * cos_p0 * cos_h0;\r\n      var z0 = f * sin_p0;\r\n\r\n      var nDotD = x0 * x + y0 * y + z0 * z;\r\n      var nDotC = x0 * x0 + y0 * y0 + z0 * z0;\r\n\r\n      // nDotD == |targetVec| * |currentVec| * cos(theta)\r\n      // nDotC == |currentVec| * |currentVec| * 1\r\n      // Note: |currentVec| == |targetVec| == f\r\n\r\n      // Sanity check: the vectors shouldn't be perpendicular because the line\r\n      // from camera through target would never intersect with the image plane\r\n      if (Math.abs(nDotD) < 1e-6) {\r\n        return null;\r\n      }\r\n\r\n      // t is the scale to use for the target vector such that its end\r\n      // touches the image plane. It's equal to 1/cos(theta) ==\r\n      //     (distance from camera to image plane through target) /\r\n      //     (distance from camera to target == f)\r\n      var t = nDotC / nDotD;\r\n\r\n      // Sanity check: it doesn't make sense to scale the vector in a negative\r\n      // direction. In fact, it should even be t >= 1.0 since the image plane\r\n      // is always outside the pano sphere (except at the viewport center)\r\n      if (t < 0.0) {\r\n        return null;\r\n      }\r\n\r\n      // (tx, ty, tz) are the coordinates of the intersection point between a\r\n      // line through camera and target with the image plane\r\n      var tx = t * x;\r\n      var ty = t * y;\r\n      var tz = t * z;\r\n\r\n      // u and v are the basis vectors for the image plane\r\n      var vx = -sin_p0 * sin_h0;\r\n      var vy = -sin_p0 * cos_h0;\r\n      var vz = cos_p0;\r\n\r\n      var ux = cos_h0;\r\n      var uy = -sin_h0;\r\n      var uz = 0;\r\n\r\n      // normalize horiz. basis vector to obtain orthonormal basis\r\n      var ul = Math.sqrt(ux * ux + uy * uy + uz * uz);\r\n      ux /= ul;\r\n      uy /= ul;\r\n      uz /= ul;\r\n\r\n      // project the intersection point t onto the basis to obtain offsets in\r\n      // terms of actual pixels in the viewport\r\n      var du = tx * ux + ty * uy + tz * uz;\r\n      var dv = tx * vx + ty * vy + tz * vz;\r\n\r\n      // use the calculated pixel offsets\r\n      target.left += du;\r\n      target.top -= dv;\r\n      return target;\r\n    };\r\n\r\n    povToPixel2d = (targetPov, currentPov, zoom, viewport) => {\r\n      // Gather required variables\r\n      var width = viewport.offsetWidth;\r\n      var height = viewport.offsetHeight;\r\n      var target = {\r\n        left: width / 2,\r\n        top: height / 2,\r\n      };\r\n\r\n      // In the 2D environment, the FOV follows the documented curve.\r\n      var hfov = 180 / Math.pow(2, zoom);\r\n      var vfov = hfov * (height / width);\r\n      var dh = this.wrapHeading(targetPov.heading - currentPov.heading);\r\n      var dv = targetPov.pitch - currentPov.pitch;\r\n\r\n      target.left += (dh / hfov) * width;\r\n      target.top -= (dv / vfov) * height;\r\n      return target;\r\n    };\r\n\r\n    wrapHeading = (heading) => {\r\n      // We shift to the range [0,360) because of the way JS behaves for modulos of\r\n      // negative numbers.\r\n      heading = (heading + 180) % 360;\r\n\r\n      // Determine if we have to wrap around\r\n      if (heading < 0) {\r\n        heading += 360;\r\n      }\r\n\r\n      return heading - 180;\r\n    };\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport asyncLoading from \"react-async-loader\";\r\nimport Label from \"./Label\";\r\nimport { combineMapOptions } from \"./utils/mapTools\";\r\nimport { markersInit } from \"./utils/markerTools\";\r\nimport {\r\n  bindStreetViewEvents,\r\n  combineStreetViewOptions,\r\n} from \"./utils/streetViewTools\";\r\nimport { isEqual } from \"lodash\";\r\nimport {\r\n  MapContainer,\r\n  OriginalMapWrapper,\r\n  Shade,\r\n  SingleMarkerInnerContainer,\r\n  SingleMarkerInnerWrapper,\r\n  SingleMarkerInnerText,\r\n  SmallMap,\r\n  StreetViewContainer,\r\n  StreetViewWindow,\r\n} from \"./style\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport SingleMarker from \"./SingleMarker\";\r\nimport { FILL_STREET_VIEW_SELECT_IMAGE } from \"../../redux/reducers/streetView\";\r\n\r\nconst OriginalMap = ({\r\n  mainStyle,\r\n  googleMaps,\r\n  mapOptions,\r\n  streetViewOptions,\r\n  events,\r\n  markers,\r\n  // panoMarkers,\r\n  labelMode,\r\n  labels,\r\n  handleStreetViewClick,\r\n}) => {\r\n  const _map = React.useRef();\r\n  const _streetView = React.useRef();\r\n  const _mapOptions = React.useRef();\r\n  const _streetViewOptions = React.useRef();\r\n  const [map, setMap] = React.useState(null);\r\n  const [streetView, setStreetView] = React.useState(null);\r\n\r\n  /* ---------------------------------- Redux --------------------------------- */\r\n  const dispatch = useDispatch();\r\n  const { panoMarkers } = useSelector((state) => state.streetView);\r\n  // const [clickList, setClickList] = React.useState(\r\n  //   panoMarkers.map((marker) => ({ id: marker.id, isClick: marker.isClick }))\r\n  // );\r\n\r\n  React.useEffect(() => {\r\n    // First initialization\r\n    if (streetView === null && map === null && googleMaps) {\r\n      // console.log(\"Initialize......\");\r\n      _mapOptions.current = mapOptions;\r\n      _streetViewOptions.current = streetViewOptions;\r\n      setMap(new googleMaps.Map(_map.current, combineMapOptions(mapOptions)));\r\n      setStreetView(\r\n        new googleMaps.StreetViewPanorama(\r\n          _streetView.current,\r\n          combineStreetViewOptions(streetViewOptions)\r\n        )\r\n      );\r\n    }\r\n\r\n    // Binding events\r\n    if (\r\n      streetView !== null &&\r\n      map !== null &&\r\n      isEqual(_mapOptions.current, mapOptions) &&\r\n      isEqual(_streetViewOptions.current, streetViewOptions)\r\n    ) {\r\n      map.setStreetView(streetView);\r\n      bindStreetViewEvents(streetView, events, map);\r\n      markersInit(googleMaps, markers, map);\r\n    }\r\n\r\n    // Update street view\r\n    if (\r\n      streetView !== null &&\r\n      map !== null &&\r\n      !isEqual(_mapOptions.current, mapOptions) &&\r\n      !isEqual(_streetViewOptions.current, streetViewOptions)\r\n    ) {\r\n      _mapOptions.current = mapOptions;\r\n      _streetViewOptions.current = streetViewOptions;\r\n      setMap(new googleMaps.Map(_map.current, combineMapOptions(mapOptions)));\r\n      setStreetView(\r\n        new googleMaps.StreetViewPanorama(\r\n          _streetView.current,\r\n          combineStreetViewOptions(streetViewOptions)\r\n        )\r\n      );\r\n      // if (googleMaps) {\r\n      //   panoMarkers.length > 0 &&\r\n      //     panoMarkerInit(\r\n      //       googleMaps,\r\n      //       panoMarkers,\r\n      //       streetView,\r\n      //       _streetView.current\r\n      //     );\r\n      // }\r\n    }\r\n    return () => {\r\n      if (map) {\r\n        googleMaps.event.clearInstanceListeners(map);\r\n      }\r\n    };\r\n  }, [\r\n    map,\r\n    streetView,\r\n    googleMaps,\r\n    mapOptions,\r\n    streetViewOptions,\r\n    events,\r\n    markers,\r\n    panoMarkers,\r\n  ]);\r\n\r\n  /* ----------------------- Update Street View Markers ----------------------- */\r\n  // React.useEffect(() => {\r\n  //   if (googleMaps) {\r\n  //     panoMarkers.length > 0 &&\r\n  //       panoMarkerInit(\r\n  //         googleMaps,\r\n  //         panoMarkers,\r\n  //         streetView,\r\n  //         _streetView.current\r\n  //       );\r\n  //   }\r\n  // }, [googleMaps, panoMarkers, streetView]);\r\n\r\n  return (\r\n    <OriginalMapWrapper id=\"originalMap\">\r\n      <StreetViewContainer\r\n        className=\"streetViewContainer\"\r\n        style={mainStyle}\r\n        onClick={handleStreetViewClick}\r\n      >\r\n        {labels &&\r\n          labels.length > 0 &&\r\n          labels.map(({ id, color, position, display }) => (\r\n            <Label\r\n              key={id}\r\n              labelStyle={{\r\n                left: `${position.x}px`,\r\n                top: `${position.y}px`,\r\n                backgroundColor: color,\r\n                display,\r\n              }}\r\n            />\r\n          ))}\r\n        {labelMode && <div className=\"labelPanel\"></div>}\r\n        <StreetViewWindow id=\"streetView\" ref={_streetView} />\r\n        {googleMaps &&\r\n          streetView &&\r\n          panoMarkers.length > 0 &&\r\n          panoMarkers.map((item) => (\r\n            <SingleMarker\r\n              key={item.id}\r\n              id={item.id}\r\n              googleMaps={googleMaps}\r\n              pano={streetView}\r\n              position={item.pov}\r\n              title={item.title}\r\n              anchor={new googleMaps.Point(item.point[0], item.point[1])}\r\n              size={new googleMaps.Size(20, 20)}\r\n              container={_streetView.current}\r\n              clickFunc={() => {\r\n                dispatch({\r\n                  type: FILL_STREET_VIEW_SELECT_IMAGE,\r\n                  payload: item.image_id,\r\n                });\r\n              }}\r\n            >\r\n              <SingleMarkerInnerWrapper targetType={item.title}>\r\n                <SingleMarkerInnerContainer>\r\n                  <SingleMarkerInnerText>\r\n                    <strong>Type</strong>: {item.title}\r\n                  </SingleMarkerInnerText>\r\n                  <SingleMarkerInnerText>\r\n                    <strong>Subtype</strong>:{\" \"}\r\n                    {item.subtype ? item.subtype : \"null\"}\r\n                  </SingleMarkerInnerText>\r\n                  <SingleMarkerInnerText>\r\n                    <strong>LabeledBy</strong>: {item.nickname}\r\n                  </SingleMarkerInnerText>\r\n                </SingleMarkerInnerContainer>\r\n              </SingleMarkerInnerWrapper>\r\n            </SingleMarker>\r\n          ))}\r\n      </StreetViewContainer>\r\n      <MapContainer className=\"mapContainer\">\r\n        <Shade className=\"shade\" />\r\n        <SmallMap id=\"map\" ref={_map} />\r\n      </MapContainer>\r\n    </OriginalMapWrapper>\r\n  );\r\n};\r\n\r\nconst mapScriptsToProps = ({ api }) => ({\r\n  googleMaps: {\r\n    globalPath: \"google.maps\",\r\n    url: `https://maps.googleapis.com/maps/api/js?key=${api}&v=weekly`,\r\n    jsonp: true,\r\n  },\r\n});\r\n\r\nexport default asyncLoading(mapScriptsToProps)(OriginalMap);\r\n","import { CreatePanoMarker } from \"./panomarker\";\r\n\r\nexport function markersInit(googleMaps, markers, map) {\r\n  markers &&\r\n    markers.forEach(({ id, markerOptions }) => {\r\n      new googleMaps.Marker(Object.assign({}, { map }, markerOptions));\r\n    });\r\n}\r\n\r\n/**\r\n * id:string,\r\n * pov:{heading, pitch},\r\n * title:string,\r\n * point:[number, number]\r\n */\r\n\r\nexport function panoMarkerInit(googleMaps, markers, streetView, streetViewRef) {\r\n  try {\r\n    const streetMarker = CreatePanoMarker(googleMaps);\r\n    markers &&\r\n      markers.forEach(({ id, pov, title, point }) => {\r\n        const testMarker = new streetMarker({\r\n          pano: streetView,\r\n          id,\r\n          position: {\r\n            heading: pov.heading,\r\n            pitch: pov.pitch,\r\n          },\r\n          anchor: new googleMaps.Point(point[0], point[1]),\r\n          size: new googleMaps.Size(40, 40),\r\n          // icon: MarkerIcon,\r\n          title,\r\n          labelType: title,\r\n          container: streetViewRef,\r\n        });\r\n        console.log(\"testMarker -> \", testMarker);\r\n      });\r\n  } catch (e) {\r\n    console.log(new Error(e));\r\n  }\r\n}\r\n","export function debounce(fn, time) {\r\n  let timer;\r\n  return (...args) => {\r\n    clearTimeout(timer);\r\n    timer = setTimeout(fn.bind(...args), time);\r\n  };\r\n}\r\n\r\nexport function isEqual(pre, next) {\r\n  let result = true;\r\n  Object.keys(pre).forEach((key) => {\r\n    if (pre[key] !== next[key]) {\r\n      result = false;\r\n      return result;\r\n    }\r\n  });\r\n  return result;\r\n}\r\n\r\nexport function generateMapOption(lat, lng) {\r\n  return {\r\n    center: {\r\n      lat,\r\n      lng,\r\n    },\r\n    zoom: 18,\r\n  };\r\n}\r\n\r\nexport function generateStreetOption(\r\n  lat,\r\n  lng,\r\n  heading = 230,\r\n  pitch = 0,\r\n  zoom = 1\r\n) {\r\n  return {\r\n    position: {\r\n      lat,\r\n      lng,\r\n    },\r\n    pov: {\r\n      heading,\r\n      pitch,\r\n    },\r\n    zoom,\r\n  };\r\n}\r\n","export default __webpack_public_path__ + \"static/media/Group1.c70054d7.png\";","import styled, { css } from \"styled-components/macro\";\r\nimport Background from \"../../images/Group1.png\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { REM } from \"../../style/helper\";\r\n\r\nexport const ExplorationWrapper = styled.section`\r\n  /* background: url(${Background}) no-repeat; */\r\n  background: #fbf8f5;\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nexport const ExplorationContainer = styled.div`\r\n  margin-top: 90px;\r\n  width: 1236px;\r\n  /* margin-left: 30px; */\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport const ExplorationPanel = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  align-items: flex-end;\r\n  transform: translateX(-30%);\r\n`;\r\n\r\nexport const ExplorationCover = styled.div``;\r\n\r\nexport const ExplorationShowcase = styled.div`\r\n  margin-top: 20px;\r\n  width: 421px;\r\n  border: 2px solid #3f3d56;\r\n  box-sizing: border-box;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 10px 20px;\r\n  ${(props) =>\r\n    props.select\r\n      ? css`\r\n          border: 4px solid #a45d5d;\r\n        `\r\n      : css`\r\n          border: 2px solid #3f3d56;\r\n        `}\r\n`;\r\n\r\nexport const ImageListContainer = styled.div`\r\n  ${(props) =>\r\n    props.scroll &&\r\n    css`\r\n      overflow-y: scroll;\r\n    `}\r\n  height: 400px\r\n`;\r\n\r\nexport const ExplorationBtnGroup = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  /* justify-content: flex-end; */\r\n`;\r\n\r\nexport const ShowcaseText = styled.span`\r\n  ${(props) =>\r\n    props.finished === \"true\" &&\r\n    css`\r\n      text-decoration-line: line-through;\r\n    `}\r\n`;\r\n\r\nexport const ShowcaseButton = styled(Button)`\r\n  padding: 6px 45px !important;\r\n  font-size: 14px !important;\r\n  /* margin-left: 10px !important; */\r\n  font-weight: bolder !important;\r\n  ${(props) =>\r\n    props.finished === \"true\"\r\n      ? css`\r\n          background: #d0b89c !important;\r\n          color: #3f3d56 !important;\r\n        `\r\n      : css`\r\n          background: #abd1c6 !important;\r\n          color: #fff !important;\r\n        `}\r\n`;\r\n\r\nexport const NextButton = styled(Button)`\r\n  background-color: ${(props) => props.theme.primaryColor} !important;\r\n  color: white !important;\r\n  padding: ${REM(5)} ${REM(100)} !important;\r\n  font-weight: 500 !important;\r\n  font-size: ${REM(18)} !important;\r\n  align-self: right;\r\n  margin-top: 10px !important;\r\n  /* justify-self: right; */\r\n`;\r\n\r\nexport const CaptureButton = styled(Button)`\r\n  background-color: ${(props) => props.theme.primaryFont} !important;\r\n  color: white !important;\r\n  padding: ${REM(5)} ${REM(100)} !important;\r\n  font-weight: 500 !important;\r\n  font-size: ${REM(18)} !important;\r\n  align-self: right;\r\n  /* justify-self: right; */\r\n`;\r\n\r\nexport const GetImageButton = styled(Button)`\r\n  background-color: ${(props) => props.theme.primaryFont} !important;\r\n  color: white !important;\r\n  padding: ${REM(5)} ${REM(100)} !important;\r\n  font-weight: 500 !important;\r\n  font-size: ${REM(18)} !important;\r\n  align-self: right;\r\n  /* justify-self: right; */\r\n`;\r\n\r\nexport const CaptureButtonTips = styled.small`\r\n  text-align: center;\r\n  color: gray;\r\n`;\r\n\r\nexport const ProgressMeter = styled.div`\r\n  background-color: #d8d8d8;\r\n  border-radius: 20px;\r\n  position: relative;\r\n  margin: 15px 0;\r\n  height: 30px;\r\n  width: 400px;\r\n`;\r\n\r\nexport const ProgressBarInner = styled.div`\r\n  background: linear-gradient(to left, #f2709c, #ff9472);\r\n  box-shadow: 0 3px 3px -5px #f2709c, 0 2px 5px #f2709c;\r\n  border-radius: 20px;\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  width: 0;\r\n  opacity: 0;\r\n  transition: 1s ease 0.3s;\r\n  opacity: 1;\r\n  width: ${(props) => `${props.value}%`};\r\n`;\r\n","import axios from \"axios\";\r\n\r\nconst fetchURL = (key, heading, pitch, lat, lon, zoom) => {\r\n  // return `https://maps.googleapis.com/maps/api/streetview?size=640x640&location=${lat},${lon}&fov=90&heading=${heading}&pitch=${pitch}&key=${key}`;\r\n  return `https://maps.googleapis.com/maps/api/streetview?size=640x640&location=${lat},${lon}&fov=${getFov(\r\n    zoom\r\n  )}&heading=${heading}&pitch=${pitch}&key=${key}`;\r\n};\r\n\r\nexport const fetchGoogleStreetView = (key, heading, pitch, lat, lon, zoom) => {\r\n  const link = fetchURL(key, heading, pitch, lat, lon, zoom);\r\n  return axios.get(link, {\r\n    responseType: \"blob\",\r\n  });\r\n};\r\nexport function getFov(zoom) {\r\n  let result = 90;\r\n  switch (Math.round(zoom)) {\r\n    case 0:\r\n      result = 180;\r\n      break;\r\n    case 1:\r\n      result = 90;\r\n      break;\r\n    case 2:\r\n      result = 45;\r\n      break;\r\n    case 3:\r\n      result = 22.5;\r\n      break;\r\n    case 4:\r\n      result = 11.25;\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function fetchMetadata(key, location) {\r\n  return axios.get(\r\n    `https://maps.googleapis.com/maps/api/streetview/metadata?location=${location.lat},${location.lng}&key=${key}`\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport OriginalMap from \"../../components/OriginalMap\";\r\nimport { generateMapOption, generateStreetOption } from \"./utils\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { LOGIN } from \"../../redux/actionTypes\";\r\nimport { fetchRandomList } from \"../../api/images\";\r\nimport Navbar from \"../../components/Navbar\";\r\nimport {\r\n  CaptureButton,\r\n  ExplorationBtnGroup,\r\n  ExplorationContainer,\r\n  ExplorationCover,\r\n  ExplorationPanel,\r\n  ExplorationShowcase,\r\n  ExplorationWrapper,\r\n  NextButton,\r\n  ShowcaseButton,\r\n  ShowcaseText,\r\n  CaptureButtonTips,\r\n  GetImageButton,\r\n  ImageListContainer,\r\n} from \"./style\";\r\nimport { deleteAllLocal } from \"../../utils/localStorage\";\r\nimport { Progress, message } from \"antd\";\r\nimport {\r\n  FILL_STREET_VIEW_IMAGE_LIST,\r\n  FILL_STREET_VIEW_INFO,\r\n  FILL_STREET_VIEW_LOCATION,\r\n  FILL_STREET_VIEW_WITHOUT_IMAGE_LIST,\r\n} from \"../../redux/reducers/streetView\";\r\nimport {\r\n  fetchGoogleStreetView,\r\n  fetchMetadata,\r\n} from \"../../api/staticStreetView\";\r\nimport { UploadProgressContainer } from \"../../components/StreetViewOnly/style\";\r\nimport PreviewModal from \"../../components/StreetViewOnly/PreviewModal\";\r\nimport { storage } from \"../../firebase\";\r\nimport { FILL_STREET_VIEW_IMAGE } from \"../../redux/reducers/streetView\";\r\nimport { fetchStreetViewImagesByPano } from \"../../api/collectImage\";\r\n\r\nconst defaultInfo = {\r\n  pano: \"\",\r\n  position: {\r\n    lat: 40.7541,\r\n    lng: -73.99208,\r\n  },\r\n  pov: {\r\n    heading: 34,\r\n    pitch: 10,\r\n    zoom: 1,\r\n  },\r\n};\r\nconst CaptureExploration = () => {\r\n  /* ------------------------------ Choose Button ----------------------------- */\r\n  /**\r\n   * I have two buttons in this page\r\n   * Capture button is used to take the screenshot\r\n   * Get image button is used to query google image\r\n   * In order to easily modify this two functions/features,\r\n   * I put all logic functions into this whole module.\r\n   */\r\n  const [showWhichBtn] = React.useState(false);\r\n\r\n  const locationInfo = React.useRef(defaultInfo);\r\n\r\n  // Router\r\n  const history = useHistory();\r\n\r\n  // Redux\r\n  // const {  position  } = useSelector(\r\n  //   (state) => state.map\r\n  // );\r\n  const {\r\n    pano,\r\n    panoMarkers,\r\n    progress,\r\n    images: imageList,\r\n    location,\r\n    pov,\r\n    selectImage,\r\n  } = useSelector((state) => state.streetView);\r\n\r\n  // To solve image list problem\r\n  // const imageList = images.length > 0 ? images : null;\r\n\r\n  const dispatch = useDispatch();\r\n  const _mount = React.useRef(pano);\r\n  const _first = React.useRef(false);\r\n  /* ------------------------------ Upload Image ------------------------------ */\r\n  const [uploadProgress, setUploadProgress] = React.useState(null);\r\n\r\n  /* ------------------------------ Preview Modal ----------------------------- */\r\n  const [previewImg, setPreviewImg] = React.useState(null);\r\n  const [imgBlob, setImgBlob] = React.useState(null);\r\n  const [showPreview, setShowPreview] = React.useState(false);\r\n  const hidePreviewModal = () => {\r\n    setShowPreview(false);\r\n  };\r\n  const confirmPreviewModal = () => {\r\n    setShowPreview(false);\r\n    saveReduxPov();\r\n    imgBlob && uploadImage(imgBlob);\r\n  };\r\n\r\n  const saveStreetViewImageInRedux = React.useCallback(\r\n    async function () {\r\n      try {\r\n        const { data } = await fetchRandomList();\r\n        const list = data.data[0];\r\n        const location = {\r\n          lat: list.lat,\r\n          lng: list.lon,\r\n        };\r\n        const { data: newMetaData } = await fetchMetadata(\r\n          process.env.REACT_APP_API_KEY,\r\n          location\r\n        );\r\n        if (newMetaData.status === \"OK\") {\r\n          dispatch({ type: FILL_STREET_VIEW_LOCATION, payload: newMetaData });\r\n        } else {\r\n          history.push(\"/home\");\r\n        }\r\n        const { data: streetViewImages } = await fetchStreetViewImagesByPano(\r\n          newMetaData.pano_id\r\n        );\r\n        if (streetViewImages.code === 0) {\r\n          dispatch({\r\n            type: FILL_STREET_VIEW_IMAGE_LIST,\r\n            payload: streetViewImages.data,\r\n          });\r\n        } else {\r\n          dispatch({\r\n            type: FILL_STREET_VIEW_WITHOUT_IMAGE_LIST,\r\n          });\r\n        }\r\n        _mount.current = true;\r\n      } catch (_) {\r\n        history.push(\"/login\");\r\n        deleteAllLocal();\r\n        dispatch({ type: LOGIN, payload: { id: \"\", token: \"\", nickname: \"\" } });\r\n      }\r\n    },\r\n    [dispatch, history]\r\n  );\r\n\r\n  // Component onMounted\r\n  React.useEffect(() => {\r\n    if (!_mount.current) saveStreetViewImageInRedux();\r\n  }, [saveStreetViewImageInRedux]);\r\n\r\n  const handlePosition = async (mapInfo) => {\r\n    try {\r\n      const { data: streetViewImages } = await fetchStreetViewImagesByPano(\r\n        mapInfo.pano\r\n      );\r\n      if (streetViewImages.code === 0) {\r\n        dispatch({\r\n          type: FILL_STREET_VIEW_IMAGE_LIST,\r\n          payload: streetViewImages.data,\r\n        });\r\n      } else {\r\n        dispatch({\r\n          type: FILL_STREET_VIEW_WITHOUT_IMAGE_LIST,\r\n        });\r\n      }\r\n    } catch (_) {\r\n      history.push(\"/login\");\r\n      deleteAllLocal();\r\n      dispatch({ type: LOGIN, payload: { id: \"\", token: \"\", nickname: \"\" } });\r\n    }\r\n  };\r\n\r\n  const onPositionChanged = (e, map) => {\r\n    locationInfo.current = e;\r\n    map.setCenter(locationInfo.current.position);\r\n    if (_first.current) {\r\n      handlePosition(e);\r\n    } else {\r\n      _first.current = true;\r\n    }\r\n  };\r\n\r\n  const onPovChanged = (e, map) => {\r\n    locationInfo.current = e;\r\n    map.setCenter(locationInfo.current.position);\r\n  };\r\n\r\n  function saveReduxPov() {\r\n    const capturePano = locationInfo.current.pano;\r\n    const captureLocation = locationInfo.current.position;\r\n    const capturePov = locationInfo.current.pov;\r\n    dispatch({\r\n      type: FILL_STREET_VIEW_INFO,\r\n      payload: {\r\n        pano: capturePano,\r\n        location: captureLocation,\r\n        pov: capturePov,\r\n      },\r\n    });\r\n  }\r\n  /* -------------------------- Handle Capture Button ------------------------- */\r\n  const handleCaptureButton = () => {\r\n    saveReduxPov();\r\n    history.push(\"/captureImage\");\r\n  };\r\n\r\n  /* ------------------------- Handle Get Image Button ------------------------ */\r\n  const handleGetImageButton = async () => {\r\n    try {\r\n      const result = await fetchGoogleStreetView(\r\n        process.env.REACT_APP_API_KEY,\r\n        locationInfo.current.pov.heading,\r\n        locationInfo.current.pov.pitch,\r\n        locationInfo.current.position.lat,\r\n        locationInfo.current.position.lng,\r\n        locationInfo.current.pov.zoom\r\n      );\r\n      if (result.status === 200) {\r\n        const newImgSrc = await window.URL.createObjectURL(result.data);\r\n        setImgBlob(result.data);\r\n        setPreviewImg(newImgSrc);\r\n        setShowPreview(true);\r\n      } else {\r\n        message.warning(\"The street view does not exist...\");\r\n      }\r\n    } catch (e) {\r\n      message.error(new Error(e).message);\r\n    }\r\n  };\r\n\r\n  function uploadImage(imgBlob) {\r\n    // Upload file and metadata to the object 'images/mountains.jpg'\r\n    var uploadTask = storage\r\n      .ref(\r\n        `${locationInfo.current.pano}/h_${locationInfo.current.pov.heading}_p_${locationInfo.current.pov.pitch}`\r\n      )\r\n      .put(imgBlob);\r\n\r\n    // Listen for state changes, errors, and completion of the upload.\r\n    uploadTask.on(\r\n      \"state_changed\", // or 'firebase.storage.TaskEvent.STATE_CHANGED'\r\n      (snapshot) => {\r\n        const currentProgress =\r\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n        setUploadProgress(currentProgress);\r\n      },\r\n      (error) => {\r\n        console.log(error);\r\n      },\r\n      () => {\r\n        // Upload completed successfully, now we can get the download URL\r\n        uploadTask.snapshot.ref.getDownloadURL().then((url) => {\r\n          dispatch({\r\n            type: FILL_STREET_VIEW_IMAGE,\r\n            payload: { imgSize: [640, 640], imgSrc: url },\r\n          });\r\n          message.success(\"Upload successfully\");\r\n          history.push(\"/captureLabelPage\");\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ExplorationWrapper>\r\n        <Navbar primary=\"white\" isStatic={true} isFixed={true} />\r\n        {pano && (\r\n          <ExplorationContainer>\r\n            <OriginalMap\r\n              api={process.env.REACT_APP_API_KEY}\r\n              streetViewOptions={generateStreetOption(\r\n                location.lat,\r\n                location.lng,\r\n                pov.heading,\r\n                pov.pitch\r\n                // pov.zoom\r\n              )}\r\n              mapOptions={generateMapOption(location.lat, location.lng)}\r\n              events={{ onPositionChanged, onPovChanged }}\r\n              panoMarkers={panoMarkers}\r\n            />\r\n            <ExplorationPanel>\r\n              <ExplorationCover>\r\n                <div style={{ width: \"420px\" }}>\r\n                  <Progress percent={progress} />\r\n                </div>\r\n                <ImageListContainer scroll={imageList.length >= 4}>\r\n                  {imageList.length > 0 &&\r\n                    imageList.map(({ _id, completed, image_id }, index) => (\r\n                      <ExplorationShowcase\r\n                        key={_id + index}\r\n                        select={selectImage === image_id}\r\n                      >\r\n                        <ShowcaseText finished={completed.toString()}>\r\n                          Image - {index}\r\n                        </ShowcaseText>\r\n                        <ShowcaseButton\r\n                          finished={completed.toString()}\r\n                          onClick={() => {\r\n                            history.push(`/editCaptureLabelPage/${_id}`);\r\n                          }}\r\n                          disabled={completed}\r\n                        >\r\n                          {completed ? \"completed\" : \"view\"}\r\n                        </ShowcaseButton>\r\n                      </ExplorationShowcase>\r\n                    ))}\r\n                </ImageListContainer>\r\n              </ExplorationCover>\r\n              <ExplorationBtnGroup>\r\n                <CaptureButtonTips>\r\n                  Please help us capture missing street view\r\n                </CaptureButtonTips>\r\n                {showWhichBtn ? (\r\n                  <CaptureButton onClick={handleCaptureButton}>\r\n                    CAPTURE\r\n                  </CaptureButton>\r\n                ) : (\r\n                  <GetImageButton onClick={handleGetImageButton}>\r\n                    QUERY\r\n                  </GetImageButton>\r\n                )}\r\n                <NextButton\r\n                  onClick={async () => {\r\n                    saveStreetViewImageInRedux();\r\n                    _first.current = false;\r\n                  }}\r\n                >\r\n                  NEXT\r\n                </NextButton>\r\n              </ExplorationBtnGroup>\r\n            </ExplorationPanel>\r\n          </ExplorationContainer>\r\n        )}\r\n      </ExplorationWrapper>\r\n      {previewImg && (\r\n        <PreviewModal\r\n          show={showPreview}\r\n          confirmModal={confirmPreviewModal}\r\n          hideModal={hidePreviewModal}\r\n          imgSrc={previewImg}\r\n          top={20}\r\n        />\r\n      )}\r\n      {uploadProgress && (\r\n        <UploadProgressContainer>\r\n          <Progress type=\"circle\" percent={uploadProgress} />\r\n        </UploadProgressContainer>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CaptureExploration;\r\n","import React from \"react\";\r\nimport Logo from \"../../images/SmallLogo.svg\";\r\nimport { Modal } from \"antd\";\r\nimport { ReactLabelTool } from \"@fgsurewin/react_labeltool\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { LOGIN } from \"../../redux/actionTypes\";\r\nimport { deleteAllLocal } from \"../../utils/localStorage\";\r\nimport {\r\n  labelsDecorator,\r\n  generatePanoMarkersAtCenter,\r\n  typeConfig,\r\n  labelsReverser,\r\n} from \"./utils\";\r\nimport {\r\n  addStreetViewLabeledArea,\r\n  addStreetViewMarkers,\r\n  fetchStreetViewImageById,\r\n  fetchStreetViewToggle,\r\n} from \"../../api/collectImage\";\r\nimport { addImages } from \"../../api/user\";\r\nimport {\r\n  FILL_STREET_VIEW_CLEAR_MARKERS,\r\n  FILL_STREET_VIEW_IMAGE_COMPLETED,\r\n  FILL_STREET_VIEW_MARKERS,\r\n} from \"../../redux/reducers/streetView\";\r\n\r\nexport default function EditCaptureLabelPage() {\r\n  const [state, setState] = React.useState(null);\r\n  const params = useParams();\r\n  const history = useHistory();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const { progress } = useSelector((state) => state.streetView);\r\n  const { id: userId, nickname } = useSelector((state) => state.user);\r\n\r\n  React.useEffect(() => {\r\n    async function loadFunction() {\r\n      try {\r\n        const { data } = await fetchStreetViewImageById(params.id);\r\n        setState(data.data);\r\n      } catch (_) {\r\n        history.push(\"/login\");\r\n        deleteAllLocal();\r\n        dispatch({ type: LOGIN, payload: { id: \"\", token: \"\", nickname: \"\" } });\r\n      }\r\n    }\r\n    loadFunction();\r\n    return async () => {\r\n      try {\r\n        await fetchStreetViewToggle({ labeled: false, id: params.id });\r\n      } catch (_) {\r\n        history.push(\"/login\");\r\n        deleteAllLocal();\r\n        dispatch({ type: LOGIN, payload: { id: \"\", token: \"\", nickname: \"\" } });\r\n      }\r\n    };\r\n  }, [params, dispatch, history]);\r\n\r\n  const onCancel = async () => {\r\n    try {\r\n      await fetchStreetViewToggle({\r\n        labeled: false,\r\n        id: params.id,\r\n      });\r\n      Modal.confirm({\r\n        title: \"Warning Message\",\r\n        content: \"Do you want to leave without confirmation?\",\r\n        cancelText: \"Cancel\",\r\n        onCancel() {},\r\n        onOk() {\r\n          history.push(\"/streetView\");\r\n        },\r\n      });\r\n    } catch (_) {\r\n      history.push(\"/login\");\r\n      deleteAllLocal();\r\n      dispatch({ type: LOGIN, payload: { id: \"\", token: \"\", nickname: \"\" } });\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (value) => {\r\n    try {\r\n      await addStreetViewLabeledArea({\r\n        id: params.id,\r\n        labelArea: labelsReverser(value, state[\"image_size\"]),\r\n      });\r\n      await fetchStreetViewToggle({ labeled: false, id: params.id });\r\n      const number = progress + 10 === 100 ? 3 : 1;\r\n      await addImages({ id: userId, number });\r\n\r\n      // Handle Panorama Markers\r\n      const streetViewMarkerList = generatePanoMarkersAtCenter(\r\n        value,\r\n        state.pov,\r\n        state[\"image_id\"],\r\n        nickname\r\n      );\r\n      await addStreetViewMarkers({\r\n        id: params.id,\r\n        markers: streetViewMarkerList,\r\n      });\r\n      dispatch({\r\n        type: FILL_STREET_VIEW_CLEAR_MARKERS,\r\n        payload: {\r\n          image_id: state[\"image_id\"],\r\n        },\r\n      });\r\n      dispatch({\r\n        type: FILL_STREET_VIEW_MARKERS,\r\n        payload: streetViewMarkerList,\r\n      });\r\n      dispatch({ type: FILL_STREET_VIEW_IMAGE_COMPLETED, payload: params.id });\r\n\r\n      history.push(\"/streetView\");\r\n    } catch (_) {\r\n      history.push(\"/login\");\r\n      deleteAllLocal();\r\n      dispatch({ type: LOGIN, payload: { id: \"\", token: \"\", nickname: \"\" } });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {state && (\r\n        <ReactLabelTool\r\n          Logo={Logo}\r\n          typeConfig={typeConfig}\r\n          labels={labelsDecorator(state[\"labeled_area\"], state[\"image_size\"])}\r\n          imgUrl={state.url}\r\n          handleSubmit={onSubmit}\r\n          handleBack={onCancel}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Result, Button } from \"antd\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nexport default function NotFound() {\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <Result\r\n      status=\"404\"\r\n      title=\"404\"\r\n      subTitle=\"Sorry, the page you visited does not exist.\"\r\n      extra={\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => {\r\n            history.push(\"/home\");\r\n          }}\r\n        >\r\n          Back Home\r\n        </Button>\r\n      }\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Home from \"./views/Home\";\r\nimport styled from \"styled-components\";\r\n// import Exploration from \"./views/Exploration\";\r\nimport ProtectedRoute from \"./components/ProtectedRoute\";\r\nimport SignUp from \"./views/SignUp\";\r\nimport Login from \"./views/Login\";\r\n// import LabelPage from \"./views/LabelPage\";\r\nimport PureValidation from \"./views/LabelPage/PureValidation\";\r\nimport { Route, Switch, Redirect } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { LOGIN } from \"./redux/actionTypes\";\r\nimport { ID, NICKNAME, readLocal, TOKEN } from \"./utils/localStorage\";\r\nimport \"antd/dist/antd.css\";\r\nimport CapturePage from \"./views/CapturePage\";\r\nimport CaptureLabelPage from \"./views/CaptureLabelPage\";\r\nimport CaptureExploration from \"./views/CaptureExploration\";\r\nimport EditCaptureLabelPage from \"./views/CaptureLabelPage/EditCaptureLabelPage\";\r\nimport NotFound from \"./views/NotFound\";\r\n\r\nconst AppWrapper = styled.div`\r\n  overflow-x: hidden;\r\n`;\r\n\r\nfunction App() {\r\n  const dispatch = useDispatch();\r\n\r\n  React.useEffect(() => {\r\n    const id = readLocal(ID);\r\n    const token = readLocal(TOKEN);\r\n    const nickname = readLocal(NICKNAME);\r\n    dispatch({ type: LOGIN, payload: { id, token, nickname } });\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <AppWrapper>\r\n      <Switch>\r\n        <ProtectedRoute component={CaptureExploration} path=\"/streetView\" />\r\n        {/* <ProtectedRoute component={LabelPage} path=\"/validation/:id\" /> */}\r\n        <ProtectedRoute component={PureValidation} path=\"/pureValidation\" />\r\n        <ProtectedRoute component={CapturePage} path=\"/captureImage\" />\r\n        <ProtectedRoute component={CaptureLabelPage} path=\"/captureLabelPage\" />\r\n        <ProtectedRoute\r\n          component={EditCaptureLabelPage}\r\n          path=\"/editCaptureLabelPage/:id\"\r\n        />\r\n        <Route exact component={Home} path=\"/home\" />\r\n        <Route exact component={SignUp} path=\"/signUp\" />\r\n        <Route exact component={Login} path=\"/login\" />\r\n        <Route exact component={NotFound} path=\"/404\" />\r\n        <Redirect exact from=\"/\" to=\"/home\" />\r\n        <Redirect to=\"/404\" />\r\n      </Switch>\r\n    </AppWrapper>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { HANDLE_COMPLETED, HANDLE_MAP, HANDLE_EMPTY } from \"../actionTypes\";\r\n\r\n// I barely use the images list.\r\n// I only use it to show on the exploration page\r\nconst initialState = {\r\n  pano: null,\r\n  tempPano: null, // tempPano is a flag that can be used to in the onPositionChange event\r\n  position: {\r\n    lat: 0,\r\n    lng: 0,\r\n  },\r\n  images: [],\r\n  progress: 0,\r\n};\r\n\r\nfunction mapReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case HANDLE_MAP:\r\n      const list = action.payload;\r\n      return {\r\n        ...state,\r\n        pano: list[0].pano,\r\n        tempPano: list[0].pano,\r\n        position: {\r\n          ...state.position,\r\n          lat: list[0].lat,\r\n          lng: list[0].lon,\r\n          heading: list[0].yaw,\r\n        },\r\n        images: [...list].map((item) =>\r\n          Object.assign(item, { completed: false })\r\n        ),\r\n      };\r\n\r\n    // tempPano is used to do comparison with pano\r\n    case HANDLE_EMPTY:\r\n      const result = action.payload;\r\n      return {\r\n        ...state,\r\n        tempPano: result.pano,\r\n      };\r\n\r\n    case HANDLE_COMPLETED:\r\n      const id = action.payload;\r\n      return {\r\n        ...state,\r\n        progress: (state.progress + 10) % 100,\r\n        images: [...state.images].map((item) => {\r\n          if (item._id === id) item.completed = true;\r\n          return item;\r\n        }),\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nexport default mapReducer;\r\n","import { LOGIN } from \"../actionTypes\";\r\n\r\nconst initialState = {\r\n\tid: \"\",\r\n\tnickname: \"\",\r\n\ttoken: \"\",\r\n};\r\n\r\nfunction userReducer(state = initialState, action) {\r\n\tswitch (action.type) {\r\n\t\tcase LOGIN:\r\n\t\t\tconst { id, token, nickname } = action.payload;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tid,\r\n\t\t\t\ttoken,\r\n\t\t\t\tnickname,\r\n\t\t\t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\nexport default userReducer;\r\n","import { combineReducers } from \"redux\";\r\nimport map from \"./map\";\r\nimport user from \"./user\";\r\nimport streetView from \"./streetView\";\r\nexport default combineReducers({ map, user, streetView });\r\n","import { createStore } from \"redux\";\r\nimport rootReducer from \"./reducers\";\r\n\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\n\r\nconst store = createStore(\r\n\trootReducer,\r\n\tcomposeWithDevTools()\r\n\t// applyMiddleware(...middleware)\r\n\t// other store enhancers if any\r\n);\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport store from \"./redux/store\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { GlobalStyle } from \"./style/globalStyle\";\r\nimport { ThemeProvider } from \"styled-components\";\r\nimport { basicTheme } from \"./style/theme\";\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ThemeProvider theme={basicTheme}>\r\n      <Router>\r\n        <GlobalStyle />\r\n        <App />\r\n      </Router>\r\n    </ThemeProvider>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n","export const basicTheme = {\r\n\tprimaryFont: \"#3F3D56\",\r\n\tprimaryColor: \"#D6974D\",\r\n};\r\n"],"sourceRoot":""}